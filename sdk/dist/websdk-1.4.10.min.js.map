{"version":3,"sources":["websdk-1.4.10.js"],"names":["_typeof","Symbol","iterator","obj","constructor","root","factory","exports","module","define","amd","undefined","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_parsePrivacy","iq","list","items","getElementsByTagName","i","length","item","jid","getAttribute","order","type","n","_parseNameFromJidFn","name","_parseGroupBlacklist","affiliation","nick","_setText","valueDom","v","textContent","text","_version","_code","code","_utils","utils","_msg","_message","_msgHash","Queue","window","URL","webkitURL","mozURL","msURL","XDomainRequest","prototype","oldsend","send","apply","this","arguments","readyState","Strophe","Request","_newXHR","xhr","xmlrequest","overrideMimeType","onreadystatechange","func","bind","Websocket","_closeSocket","socket","me","setTimeout","close","e","_onMessage","message","WebIM","config","isDebug","console","log","ts","data","elem","indexOf","DOMParser","parseFromString","documentElement","see_uri","_conn","_changeConnectStatus","Status","REDIRECT","reset","service","_connect","_doDisconnect","search","_handleStreamStart","_streamWrap","_check_streamerror","ERROR","disconnecting","firstChild","nodeName","xmlInput","rawInput","serialize","_dataRecv","_listenNetwork","onlineCallback","offlineCallback","addEventListener","attachEvent","document","body","_parseRoom","result","rooms","roomJid","tmp","split","room","roomId","push","_parseRoomOccupants","occupants","_parseResponseMessage","msginfo","parseMsgData","errorMsg","msgBodies","msgBody","childNodes","childNode","nodeType","ElementType","TEXT","jsondata","wholeText","nodeValue","replace","eval","delayTags","delayTag","delayMsgTime","delayTimeStamp","childrens","child","domain","tempstr","findex","substring","atindex","_parseFriend","queryTag","conn","from","rouster","subscription","friend","ask","groups","forEachChild","group","getText","subscribe","toJid","subscribed","_login","options","accessToken","access_token","stringify","onError","WEBIM_CONNCTION_OPEN_USERGRID_ERROR","context","accessTokenExpires","expires_in","stropheConn","isOpening","isOpened","getStrophe","callback","status","msg","_loginCallback","route","connect","wait","hold","_parseMessageType","msgtype","receiveinfo","namespaceURI","inviteinfo","_handleMessageQueue","hasOwnProperty","conflict","error","CONNFAIL","WEBIM_CONNCTION_SERVER_CLOSE_ERROR","reconnect","ATTACHED","CONNECTED","autoReconnectNumTotal","intervalId","setInterval","handelSendQueue","handleMessage","handleReceivedMessage","handleInviteMessage","handlePresence","handlePing","handleIqRoster","handleIqPrivacy","handleIq","addHandler","registerConfrIQHandler","STATUS_OPENED","supportRecMessage","WEBIM_MESSAGE_REC_TEXT","WEBIM_MESSAGE_REC_EMOJI","isCanDownLoadFile","WEBIM_MESSAGE_REC_PHOTO","WEBIM_MESSAGE_REC_AUDIO_FILE","supportSedMessage","WEBIM_MESSAGE_SED_TEXT","isCanUploadFile","notifyVersion","retry","heartBeat","isAutoLogin","setPresence","onOpened","canReceive","canSend","DISCONNECTING","stopHeartBeat","STATUS_CLOSING","DISCONNECTED","autoReconnectNumMax","WEBIM_CONNCTION_DISCONNECTED","STATUS_CLOSED","clear","onClosed","AUTHFAIL","WEBIM_CONNCTION_AUTH_ERROR","STATUS_ERROR","WEBIM_CONNCTION_SERVER_ERROR","status_now","_getJid","appKey","to","resource","_getJidByName","_validCheck","user","WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR","devInfos","WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR","orgName","appName","toLowerCase","isMultiLoginSessions","Date","getTime","Math","floor","random","toFixed","userId","_getXmppUrl","baseUrl","https","test","url","prefix","base","suffix","isSupportWss","WebSocket","connection","isHttpDNS","location","protocol","inactivity","heartBeatWait","maxRetries","pollingTime","autoReconnectInterval","STATUS_INIT","sendQueue","apiUrl","isWindowSDK","dnsArr","dnsIndex","dnsTotal","restHosts","restIndex","restTotal","xmppHosts","xmppIndex","xmppTotal","groupOption","registerUser","getHttpDNS","signup","pop","sendReceiptsMessage","listen","emptyfn","onTextMessage","onEmojiMessage","onPictureMessage","onAudioMessage","onVideoMessage","onFileMessage","onLocationMessage","onCmdMessage","onPresence","onRoster","onReceivedMessage","onInviteMessage","onOffline","onOnline","onConfirmPop","onUpdateMyGroupList","onUpdateMyRoster","onBlacklistUpdate","forcing","isNeed","navigator","userAgent","heartBeatID","ping","clearInterval","dom","$msg","xmlns","sendCommand","tree","cacheReceiptsMessage","host","getXmlFirstChild","ip","port","parter","Connection","getHostsByTag","tagName","tag","hosts","getRestFromHttpDNS","login","self","suc","res","options2","dataType","app_key","encodeURIComponent","success","ajax","EMPTYFN","err","restUrl","userjson","username","password","nickname","userinfo","open","pass","restTokenData","pwd","STATUS_DOLOGIN_IM","error_description","WEBIM_CONNCTION_OPEN_ERROR","STATUS_DOLOGIN_USERGRID","loginJson","grant_type","timestamp","loginfo","attach","WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR","sid","WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR","rid","WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR","wind","reason","isClosed","isClosing","disconnect","handler","ns","fail","$iq","t","up","failFn","ele","WEBIM_CONNCTION_NOTIFYVERSION_ERROR","sendIQ","presence_type","fromUser","toUser","isCreate","info","fromJid","chatroom","showTags","showTag","show","statusTags","statusTag","priorityTags","priorityTag","priority","destroy","members","member","role","kickedMember","actor","actorNick","kicked","toNick","groupJid","userJid","groupName","original_type","reflectUser","slice","lastIndexOf","getBlacklist","curJid","iqresult","errorCode","errorText","errorBool","textDOM","msgDatas","too","extmsg","ext","chattype","typeEl","bodies","receiveMsg","emojibody","parseTextMessage","Emoji","isemoji","delay","rwidth","rheight","size","width","height","substr","secret","filename","thumb","thumb_secret","file_length","filetype","addr","lat","lng","action","WEBIM_CONNCTION_CALLBACK_INNER_ERROR","mid","rcv","innerHTML","innerText","Function","form","invitemsg","reasonDom","reasonMsg","xmsg","roomid","roomjid","getUniqueId","cdate","offdate","offset","hexd","parseInt","toString","doQuery","encodeURI","chatType","response","WEBIM_MESSAGE_SED_ERROR","Object","addRoster","removeRoster","getRoster","completeFn","WEBIM_CONNCTION_GETROSTER_ERROR","pres","$pres","unsubscribe","unsubscribed","joinPublicGroup","room_nick","errorFn","WEBIM_CONNCTION_JOINROOM_ERROR","NS","MUC","listRooms","server","DISCO_ITEMS","WEBIM_CONNCTION_GETROOM_ERROR","queryRoomMember","mem","WEBIM_CONNCTION_GETROOMMEMBER_ERROR","queryRoomInfo","DISCO_INFO","settings","features","fields","fieldValues","field","fieldVar","fieldSimplify","WEBIM_CONNCTION_GETROOMINFO_ERROR","queryRoomOccupants","WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR","attrs","setUserSig","desc","getPresence","WEBIM_CONNCTION_PING_ERROR","key","errorType","WEBIM_CONNCTION_CLIENT_LOGOUT","getChatRooms","isCanSetRequestHeader","WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR","token","WEBIM_CONNCTION_LOAD_CHATROOM_ERROR","pageInfo","pagenum","pagesize","opts","headers","Authorization","joinChatRoom","WEBIM_CONNCTION_JOINCHATROOM_ERROR","quitChatRoom","WEBIM_CONNCTION_QUITCHATROOM_ERROR","_onReceiveInviteFromGroup","title","group_id","agree","WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP","reject","WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP","_onReceiveInviteAcceptionFromGroup","_onReceiveInviteDeclineFromGroup","_onAutoAcceptInvitationFromGroup","group_name","_onLeaveGroup","_onReceiveJoinGroupApplication","WEBIM_CONNECTION_ACCEPT_JOIN_GROUP","WEBIM_CONNECTION_DECLINE_JOIN_GROUP","_onReceiveAcceptionFromGroup","_onReceiveRejectionFromGroup","_onUpdateMyGroupList","_onUpdateMyRoster","that","closed","WEBIM_CONNECTION_CLOSED","sucFn","errFn","addToBlackList","blacklist","piece","keys","len","value","removeFromBlackList","_getGroupJid","addToGroupBlackList","getGroupBlacklist","removeGroupMemberFromBlacklist","changeGroupSubject","var","subject","description","destroyGroup","leaveGroupBySelf","msgInfo","errInfo","leaveGroup","addGroupMembers","acceptInviteFromGroup","rejectInviteFromGroup","createGroupAsync","toRoom","x","setAttribute","optionsPublic","optionsMembersOnly","optionsModerate","optionsAllowInvites","cnode","createGroup","statusCode","str","cefQuery","request","persistent","onSuccess","onFailure","WEBIM_CONNCTION_ATTACH_ERROR","WEBIM_CONNCTION_ATTACH_USERGRID_ERROR","WEBIM_CONNCTION_REOPEN_ERROR","WEBIM_CONNCTION_IQ_ERROR","WEBIM_CONNCTION_CROSSDOMAIN_ERROR","WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES","WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR","WEBIM_CONNCTION_AJAX_ERROR","WEBIM_CONNCTION_CLIENT_OFFLINE","WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR","WEBIM_UPLOADFILE_BROWSER_ERROR","WEBIM_UPLOADFILE_ERROR","WEBIM_UPLOADFILE_NO_LOGIN","WEBIM_UPLOADFILE_NO_FILE","WEBIM_DOWNLOADFILE_ERROR","WEBIM_DOWNLOADFILE_NO_LOGIN","WEBIM_DOWNLOADFILE_BROWSER_ERROR","WEBIM_MESSAGE_REC_TEXT_ERROR","WEBIM_MESSAGE_REC_EMOTION","WEBIM_MESSAGE_REC_AUDIO","WEBIM_MESSAGE_REC_VEDIO","WEBIM_MESSAGE_REC_VEDIO_FILE","WEBIM_MESSAGE_REC_FILE","WEBIM_MESSAGE_SED_EMOTION","WEBIM_MESSAGE_SED_PHOTO","WEBIM_MESSAGE_SED_AUDIO","WEBIM_MESSAGE_SED_AUDIO_FILE","WEBIM_MESSAGE_SED_VEDIO","WEBIM_MESSAGE_SED_VEDIO_FILE","WEBIM_MESSAGE_SED_FILE","WEBIM_FILESIZE_LIMIT","_createStandardXHR","XMLHttpRequest","_createActiveXHR","ActiveXObject","_xmlrequest","crossDomain","temp","onload","xmlDoc","async","loadXML","responseText","responseXML","ontimeout","onerror","_hasFlash","ex","plugins","_base64","_keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","isNaN","charAt","decode","String","fromCharCode","_utf8_decode","string","utftext","c2","c3","_tmpUtilXHR","_hasFormData","FormData","_hasBlob","Blob","_isCanSetRequestHeader","setRequestHeader","_hasOverrideMimeType","_isCanUploadFileAsync","_isCanUploadFile","_isCanDownLoadFile","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","TypeError","prop","hasFormData","hasBlob","hasOverrideMimeType","isCanUploadFileAsync","notSupportList","ua","l","getIEVersion","matches","tridentMap","4","5","6","7","match","json","JSON","s","arr","iterate","isArr","o","getFileUrl","fileInputId","uri","fileObj","getElementById","createObjectURL","fileItems","files","u","pos1","pos2","pos","max","index","getFileSize","file","fileSize","select","fileobject","GetFile","Size","kb","round","mb","gb","hasFlash","trim","parseEmoji","map","emoji","face","path","parseLink","reg","parseJSON","parse","requireNonComma","depth","comma","parseUploadResponse","parseDownloadResponse","uploadFile","onFileUploadProgress","onFileUploadComplete","onFileUploadError","onFileUploadCanceled","acc","uploadUrl","flashUpload","upload","abort","formData","append","download","onFileDownloadComplete","onFileDownloadError","method","resType","responseType","mimeType","innerHeaer","X-Requested-With","Accept","share-secret","faces","emessage","expr","tmsg","existEmoji","emojiStr","restMsgIndex","children","tempData","d","Hours","getHours","Minutes","getMinutes","Seconds","getSeconds","Milliseconds","getMilliseconds","getObjectKey","val","sprintf","arg","encrypt","base64","decrypt","escape","unescape","setCookie","days","cookie","getCookie","allCookie","all","decodeURIComponent","Message","setGroup","txt","set","opt","roomType","cmd","img","uploadError","uploadComplete","audio","video","_Message","_send","weichat","originType","jsonstr","_tmpComplete","_complete","entities","file_len","thumbnail","Array_h","array","Array","at","start","end","concat","remove","count","splice","join","separator","_array_h","_index","ret","head","tail","empty"],"mappings":"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","file":"websdk-1.4.10.min.js","sourcesContent":["'use strict';var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol?\"symbol\":typeof obj;};(function webpackUniversalModuleDefinition(root,factory){if((typeof exports==='undefined'?'undefined':_typeof(exports))==='object'&&(typeof module==='undefined'?'undefined':_typeof(module))==='object')module.exports=factory();else if(typeof define==='function'&&define.amd)define([],factory);else if((typeof exports==='undefined'?'undefined':_typeof(exports))==='object')exports[\"WebIM\"]=factory();else root[\"WebIM\"]=factory();})(undefined,function(){return(/******/function(modules){// webpackBootstrap\n/******/// The module cache\n/******/var installedModules={};/******/// The require function\n/******/function __webpack_require__(moduleId){/******/// Check if module is in cache\n/******/if(installedModules[moduleId])/******/return installedModules[moduleId].exports;/******/// Create a new module (and put it into the cache)\n/******/var module=installedModules[moduleId]={/******/exports:{},/******/id:moduleId,/******/loaded:false/******/};/******/// Execute the module function\n/******/modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);/******/// Flag the module as loaded\n/******/module.loaded=true;/******/// Return the exports of the module\n/******/return module.exports;/******/}/******/// expose the modules object (__webpack_modules__)\n/******/__webpack_require__.m=modules;/******/// expose the module cache\n/******/__webpack_require__.c=installedModules;/******/// __webpack_public_path__\n/******/__webpack_require__.p=\"\";/******/// Load entry module and return exports\n/******/return __webpack_require__(0);/******/}(/************************************************************************//******/[/* 0 *//***/function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);/***/},/* 1 *//***/function(module,exports,__webpack_require__){var _version='1.4.2';var _code=__webpack_require__(2).code;var _utils=__webpack_require__(3).utils;var _msg=__webpack_require__(4);var _message=_msg._msg;var _msgHash={};var Queue=__webpack_require__(5).Queue;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;if(window.XDomainRequest){XDomainRequest.prototype.oldsend=XDomainRequest.prototype.send;XDomainRequest.prototype.send=function(){XDomainRequest.prototype.oldsend.apply(this,arguments);this.readyState=2;};}Strophe.Request.prototype._newXHR=function(){var xhr=_utils.xmlrequest(true);if(xhr.overrideMimeType){xhr.overrideMimeType('text/xml');}// use Function.bind() to prepend ourselves as an argument\nxhr.onreadystatechange=this.func.bind(null,this);return xhr;};Strophe.Websocket.prototype._closeSocket=function(){if(this.socket){var me=this;setTimeout(function(){try{me.socket.close();}catch(e){}},0);}else{this.socket=null;}};/**\n\t *\n\t * Strophe.Websocket has a bug while logout:\n\t * 1.send: <presence xmlns='jabber:client' type='unavailable'/> is ok;\n\t * 2.send: <close xmlns='urn:ietf:params:xml:ns:xmpp-framing'/> will cause a problem,log as follows:\n\t * WebSocket connection to 'ws://im-api.hyphenate.io/ws/' failed: Data frame received after close_connect @ strophe.js:5292connect @ strophe.js:2491_login @ websdk-1.1.2.js:278suc @ websdk-1.1.2.js:636xhr.onreadystatechange @ websdk-1.1.2.js:2582\n\t * 3 \"Websocket error [object Event]\"\n\t * _changeConnectStatus\n\t * onError Object {type: 7, msg: \"The WebSocket connection could not be established or was disconnected.\", reconnect: true}\n\t *\n\t * this will trigger socket.onError, therefore _doDisconnect again.\n\t * Fix it by overide  _onMessage\n\t */Strophe.Websocket.prototype._onMessage=function(message){WebIM&&WebIM.config.isDebug&&console.log(WebIM.utils.ts()+'recv:',message.data);var elem,data;// check for closing stream\n// var close = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n// if (message.data === close) {\n//     this._conn.rawInput(close);\n//     this._conn.xmlInput(message);\n//     if (!this._conn.disconnecting) {\n//         this._conn._doDisconnect();\n//     }\n//     return;\n//\n// send and receive close xml: <close xmlns='urn:ietf:params:xml:ns:xmpp-framing'/>\n// so we can't judge whether message.data equals close by === simply.\nif(message.data.indexOf(\"<close \")===0){elem=new DOMParser().parseFromString(message.data,\"text/xml\").documentElement;var see_uri=elem.getAttribute(\"see-other-uri\");if(see_uri){this._conn._changeConnectStatus(Strophe.Status.REDIRECT,\"Received see-other-uri, resetting connection\");this._conn.reset();this._conn.service=see_uri;this._connect();}else{// if (!this._conn.disconnecting) {\nthis._conn._doDisconnect(\"receive <close> from server\");// }\n}return;}else if(message.data.search(\"<open \")===0){// This handles stream restarts\nelem=new DOMParser().parseFromString(message.data,\"text/xml\").documentElement;if(!this._handleStreamStart(elem)){return;}}else{data=this._streamWrap(message.data);elem=new DOMParser().parseFromString(data,\"text/xml\").documentElement;}if(this._check_streamerror(elem,Strophe.Status.ERROR)){return;}//handle unavailable presence stanza before disconnecting\nif(this._conn.disconnecting&&elem.firstChild.nodeName===\"presence\"&&elem.firstChild.getAttribute(\"type\")===\"unavailable\"){this._conn.xmlInput(elem);this._conn.rawInput(Strophe.serialize(elem));// if we are already disconnecting we will ignore the unavailable stanza and\n// wait for the </stream:stream> tag before we close the connection\nreturn;}this._conn._dataRecv(elem,message.data);};var _listenNetwork=function _listenNetwork(onlineCallback,offlineCallback){if(window.addEventListener){window.addEventListener('online',onlineCallback);window.addEventListener('offline',offlineCallback);}else if(window.attachEvent){if(document.body){document.body.attachEvent('ononline',onlineCallback);document.body.attachEvent('onoffline',offlineCallback);}else{window.attachEvent('load',function(){document.body.attachEvent('ononline',onlineCallback);document.body.attachEvent('onoffline',offlineCallback);});}}else{/*var onlineTmp = window.ononline;\n\t         var offlineTmp = window.onoffline;\n\n\t         window.attachEvent('ononline', function () {\n\t         try {\n\t         typeof onlineTmp === 'function' && onlineTmp();\n\t         } catch ( e ) {}\n\t         onlineCallback();\n\t         });\n\t         window.attachEvent('onoffline', function () {\n\t         try {\n\t         typeof offlineTmp === 'function' && offlineTmp();\n\t         } catch ( e ) {}\n\t         offlineCallback();\n\t         });*/}};var _parseRoom=function _parseRoom(result){var rooms=[];var items=result.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var roomJid=item.getAttribute('jid');var tmp=roomJid.split('@')[0];var room={jid:roomJid,name:item.getAttribute('name'),roomId:tmp.split('_')[1]};rooms.push(room);}}return rooms;};var _parseRoomOccupants=function _parseRoomOccupants(result){var occupants=[];var items=result.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var room={jid:item.getAttribute('jid'),name:item.getAttribute('name')};occupants.push(room);}}return occupants;};var _parseResponseMessage=function _parseResponseMessage(msginfo){var parseMsgData={errorMsg:true,data:[]};var msgBodies=msginfo.getElementsByTagName('body');if(msgBodies){for(var i=0;i<msgBodies.length;i++){var msgBody=msgBodies[i];var childNodes=msgBody.childNodes;if(childNodes&&childNodes.length>0){var childNode=msgBody.childNodes[0];if(childNode.nodeType==Strophe.ElementType.TEXT){var jsondata=childNode.wholeText||childNode.nodeValue;jsondata=jsondata.replace('\\n','<br>');try{var data=eval('('+jsondata+')');parseMsgData.errorMsg=false;parseMsgData.data=[data];}catch(e){}}}}var delayTags=msginfo.getElementsByTagName('delay');if(delayTags&&delayTags.length>0){var delayTag=delayTags[0];var delayMsgTime=delayTag.getAttribute('stamp');if(delayMsgTime){parseMsgData.delayTimeStamp=delayMsgTime;}}}else{var childrens=msginfo.childNodes;if(childrens&&childrens.length>0){var child=msginfo.childNodes[0];if(child.nodeType==Strophe.ElementType.TEXT){try{var data=eval('('+child.nodeValue+')');parseMsgData.errorMsg=false;parseMsgData.data=[data];}catch(e){}}}}return parseMsgData;};var _parseNameFromJidFn=function _parseNameFromJidFn(jid,domain){domain=domain||'';var tempstr=jid;var findex=tempstr.indexOf('_');if(findex!==-1){tempstr=tempstr.substring(findex+1);}var atindex=tempstr.indexOf('@'+domain);if(atindex!==-1){tempstr=tempstr.substring(0,atindex);}return tempstr;};var _parseFriend=function _parseFriend(queryTag,conn,from){var rouster=[];var items=queryTag.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var jid=item.getAttribute('jid');if(!jid){continue;}var subscription=item.getAttribute('subscription');var friend={subscription:subscription,jid:jid};var ask=item.getAttribute('ask');if(ask){friend.ask=ask;}var name=item.getAttribute('name');if(name){friend.name=name;}else{var n=_parseNameFromJidFn(jid);friend.name=n;}var groups=[];Strophe.forEachChild(item,'group',function(group){groups.push(Strophe.getText(group));});friend.groups=groups;rouster.push(friend);// B同意之后 -> B订阅A\nif(conn&&subscription=='from'){conn.subscribe({toJid:jid});}if(conn&&subscription=='to'){conn.subscribed({toJid:jid});}}}return rouster;};var _login=function _login(options,conn){var accessToken=options.access_token||'';if(accessToken==''){var loginfo=_utils.stringify(options);conn.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:options});return;}conn.context.accessToken=options.access_token;conn.context.accessTokenExpires=options.expires_in;var stropheConn=null;if(conn.isOpening()&&conn.context.stropheConn){stropheConn=conn.context.stropheConn;}else if(conn.isOpened()&&conn.context.stropheConn){// return;\nstropheConn=conn.getStrophe();}else{stropheConn=conn.getStrophe();}var callback=function callback(status,msg){_loginCallback(status,msg,conn);};conn.context.stropheConn=stropheConn;if(conn.route){stropheConn.connect(conn.context.jid,'$t$'+accessToken,callback,conn.wait,conn.hold,conn.route);}else{stropheConn.connect(conn.context.jid,'$t$'+accessToken,callback,conn.wait,conn.hold);}};var _parseMessageType=function _parseMessageType(msginfo){var msgtype='normal';var receiveinfo=msginfo.getElementsByTagName('received');if(receiveinfo&&receiveinfo.length>0&&receiveinfo[0].namespaceURI==='urn:xmpp:receipts'){msgtype='received';}else{var inviteinfo=msginfo.getElementsByTagName('invite');if(inviteinfo&&inviteinfo.length>0){msgtype='invite';}}return msgtype;};var _handleMessageQueue=function _handleMessageQueue(conn){for(var i in _msgHash){if(_msgHash.hasOwnProperty(i)){_msgHash[i].send(conn);}}};var _loginCallback=function _loginCallback(status,msg,conn){var conflict,error;if(msg==='conflict'){conflict=true;}if(status==Strophe.Status.CONNFAIL){//client offline, ping/pong timeout, server quit, server offline\nerror={type:_code.WEBIM_CONNCTION_SERVER_CLOSE_ERROR,msg:msg,reconnect:true};conflict&&(error.conflict=true);conn.onError(error);}else if(status==Strophe.Status.ATTACHED||status==Strophe.Status.CONNECTED){// client should limit the speed of sending ack messages  up to 5/s\nconn.autoReconnectNumTotal=0;conn.intervalId=setInterval(function(){conn.handelSendQueue();},200);var handleMessage=function handleMessage(msginfo){var type=_parseMessageType(msginfo);if('received'===type){conn.handleReceivedMessage(msginfo);return true;}else if('invite'===type){conn.handleInviteMessage(msginfo);return true;}else{conn.handleMessage(msginfo);return true;}};var handlePresence=function handlePresence(msginfo){conn.handlePresence(msginfo);return true;};var handlePing=function handlePing(msginfo){conn.handlePing(msginfo);return true;};var handleIqRoster=function handleIqRoster(msginfo){conn.handleIqRoster(msginfo);return true;};var handleIqPrivacy=function handleIqPrivacy(msginfo){conn.handleIqPrivacy(msginfo);return true;};var handleIq=function handleIq(msginfo){conn.handleIq(msginfo);return true;};conn.addHandler(handleMessage,null,'message',null,null,null);conn.addHandler(handlePresence,null,'presence',null,null,null);conn.addHandler(handlePing,'urn:xmpp:ping','iq','get',null,null);conn.addHandler(handleIqRoster,'jabber:iq:roster','iq','set',null,null);conn.addHandler(handleIqPrivacy,'jabber:iq:privacy','iq','set',null,null);conn.addHandler(handleIq,null,'iq',null,null,null);conn.registerConfrIQHandler&&conn.registerConfrIQHandler();conn.context.status=_code.STATUS_OPENED;var supportRecMessage=[_code.WEBIM_MESSAGE_REC_TEXT,_code.WEBIM_MESSAGE_REC_EMOJI];if(_utils.isCanDownLoadFile){supportRecMessage.push(_code.WEBIM_MESSAGE_REC_PHOTO);supportRecMessage.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE);}var supportSedMessage=[_code.WEBIM_MESSAGE_SED_TEXT];if(_utils.isCanUploadFile){supportSedMessage.push(_code.WEBIM_MESSAGE_REC_PHOTO);supportSedMessage.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE);}conn.notifyVersion();conn.retry&&_handleMessageQueue(conn);conn.heartBeat();conn.isAutoLogin&&conn.setPresence();conn.onOpened({canReceive:supportRecMessage,canSend:supportSedMessage,accessToken:conn.context.accessToken});}else if(status==Strophe.Status.DISCONNECTING){if(conn.isOpened()){conn.stopHeartBeat();conn.context.status=_code.STATUS_CLOSING;error={type:_code.WEBIM_CONNCTION_SERVER_CLOSE_ERROR,msg:msg,reconnect:true};conflict&&(error.conflict=true);conn.onError(error);}}else if(status==Strophe.Status.DISCONNECTED){if(conn.isOpened()){if(conn.autoReconnectNumTotal<conn.autoReconnectNumMax){conn.reconnect();return;}else{error={type:_code.WEBIM_CONNCTION_DISCONNECTED};conn.onError(error);}}conn.context.status=_code.STATUS_CLOSED;conn.clear();conn.onClosed();}else if(status==Strophe.Status.AUTHFAIL){error={type:_code.WEBIM_CONNCTION_AUTH_ERROR};conflict&&(error.conflict=true);conn.onError(error);conn.clear();}else if(status==Strophe.Status.ERROR){conn.context.status=_code.STATUS_ERROR;error={type:_code.WEBIM_CONNCTION_SERVER_ERROR};conflict&&(error.conflict=true);conn.onError(error);}conn.context.status_now=status;};var _getJid=function _getJid(options,conn){var jid=options.toJid||'';if(jid===''){var appKey=conn.context.appKey||'';var toJid=appKey+'_'+options.to+'@'+conn.domain;if(options.resource){toJid=toJid+'/'+options.resource;}jid=toJid;}return jid;};var _getJidByName=function _getJidByName(name,conn){var options={to:name};return _getJid(options,conn);};var _validCheck=function _validCheck(options,conn){options=options||{};if(options.user==''){conn.onError({type:_code.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR});return false;}var user=options.user+''||'';var appKey=options.appKey||'';var devInfos=appKey.split('#');if(devInfos.length!==2){conn.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR});return false;}var orgName=devInfos[0];var appName=devInfos[1];if(!orgName){conn.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR});return false;}if(!appName){conn.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR});return false;}var jid=appKey+'_'+user.toLowerCase()+'@'+conn.domain,resource=options.resource||'webim';if(conn.isMultiLoginSessions){resource+=user+new Date().getTime()+Math.floor(Math.random().toFixed(6)*1000000);}conn.context.jid=jid+'/'+resource;/*jid: {appkey}_{username}@domain/resource*/conn.context.userId=user;conn.context.appKey=appKey;conn.context.appName=appName;conn.context.orgName=orgName;return true;};var _getXmppUrl=function _getXmppUrl(baseUrl,https){if(/^(ws|http)s?:\\/\\/?/.test(baseUrl)){return baseUrl;}var url={prefix:'http',base:'://'+baseUrl,suffix:'/http-bind/'};if(https&&_utils.isSupportWss){url.prefix='wss';url.suffix='/ws/';}else{if(https){url.prefix='https';}else if(window.WebSocket){url.prefix='ws';url.suffix='/ws/';}}return url.prefix+url.base+url.suffix;};//class\nvar connection=function connection(options){if(!this instanceof connection){return new connection(options);}var options=options||{};this.isHttpDNS=options.isHttpDNS||false;this.isMultiLoginSessions=options.isMultiLoginSessions||false;this.wait=options.wait||30;this.retry=options.retry||false;this.https=options.https||location.protocol==='https:';this.url=_getXmppUrl(options.url,this.https);this.hold=options.hold||1;this.route=options.route||null;this.domain=options.domain||'hyphenate.io';this.inactivity=options.inactivity||30;this.heartBeatWait=options.heartBeatWait||4500;this.maxRetries=options.maxRetries||5;this.isAutoLogin=options.isAutoLogin===false?false:true;this.pollingTime=options.pollingTime||800;this.stropheConn=false;this.autoReconnectNumMax=options.autoReconnectNumMax||0;this.autoReconnectNumTotal=0;this.autoReconnectInterval=options.autoReconnectInterval||0;this.context={status:_code.STATUS_INIT};this.sendQueue=new Queue();//instead of sending message immediately,cache them in this queue\nthis.intervalId=null;//clearInterval return value\nthis.apiUrl=options.apiUrl||'';this.isWindowSDK=options.isWindowSDK||false;this.dnsArr=['https://rs.hyphenate.io','https://rsbak.hyphenate.io','http://182.92.174.78','http://112.126.66.111'];//http dns server hosts\nthis.dnsIndex=0;//the dns ip used in dnsArr currently\nthis.dnsTotal=this.dnsArr.length;//max number of getting dns retries\nthis.restHosts=null;//rest server ips\nthis.restIndex=0;//the rest ip used in restHosts currently\nthis.restTotal=0;//max number of getting rest token retries\nthis.xmppHosts=null;//xmpp server ips\nthis.xmppIndex=0;//the xmpp ip used in xmppHosts currently\nthis.xmppTotal=0;//max number of creating xmpp server connection(ws/bosh) retries\nthis.groupOption={};};connection.prototype.registerUser=function(options){if(location.protocol!='https:'&&this.isHttpDNS){this.dnsIndex=0;this.getHttpDNS(options,'signup');}else{this.signup(options);}};connection.prototype.handelSendQueue=function(){var options=this.sendQueue.pop();if(options!==null){this.sendReceiptsMessage(options);}};connection.prototype.listen=function(options){this.onOpened=options.onOpened||_utils.emptyfn;this.onClosed=options.onClosed||_utils.emptyfn;this.onTextMessage=options.onTextMessage||_utils.emptyfn;this.onEmojiMessage=options.onEmojiMessage||_utils.emptyfn;this.onPictureMessage=options.onPictureMessage||_utils.emptyfn;this.onAudioMessage=options.onAudioMessage||_utils.emptyfn;this.onVideoMessage=options.onVideoMessage||_utils.emptyfn;this.onFileMessage=options.onFileMessage||_utils.emptyfn;this.onLocationMessage=options.onLocationMessage||_utils.emptyfn;this.onCmdMessage=options.onCmdMessage||_utils.emptyfn;this.onPresence=options.onPresence||_utils.emptyfn;this.onRoster=options.onRoster||_utils.emptyfn;this.onError=options.onError||_utils.emptyfn;this.onReceivedMessage=options.onReceivedMessage||_utils.emptyfn;this.onInviteMessage=options.onInviteMessage||_utils.emptyfn;this.onOffline=options.onOffline||_utils.emptyfn;this.onOnline=options.onOnline||_utils.emptyfn;this.onConfirmPop=options.onConfirmPop||_utils.emptyfn;//for WindowSDK start\nthis.onUpdateMyGroupList=options.onUpdateMyGroupList||_utils.emptyfn;this.onUpdateMyRoster=options.onUpdateMyRoster||_utils.emptyfn;//for WindowSDK end\nthis.onBlacklistUpdate=options.onBlacklistUpdate||_utils.emptyfn;_listenNetwork(this.onOnline,this.onOffline);};//webrtc需要强制心跳，加个默认为false的参数 向下兼容\nconnection.prototype.heartBeat=function(){var forcing=arguments.length<=0||arguments[0]===undefined?false:arguments[0];var me=this;//IE8: strophe auto switch from ws to BOSH, need heartbeat\nvar isNeed=!/^ws|wss/.test(me.url)||/mobile/.test(navigator.userAgent);if(this.heartBeatID||!forcing&&!isNeed){return;}var options={toJid:this.domain,type:'normal'};this.heartBeatID=setInterval(function(){me.ping(options);},this.heartBeatWait);};connection.prototype.stopHeartBeat=function(){if(typeof this.heartBeatID==\"number\"){this.heartBeatID=clearInterval(this.heartBeatID);}};connection.prototype.sendReceiptsMessage=function(options){var dom=$msg({from:this.context.jid||'',to:this.domain,id:options.id||''}).c('received',{xmlns:'urn:xmpp:receipts',id:options.id||''});this.sendCommand(dom.tree());};connection.prototype.cacheReceiptsMessage=function(options){this.sendQueue.push(options);};connection.prototype.getStrophe=function(){if(location.protocol!='https:'&&this.isHttpDNS){//TODO: try this.xmppTotal times on fail\nvar url='';var host=this.xmppHosts[this.xmppIndex];var domain=_utils.getXmlFirstChild(host,'domain');var ip=_utils.getXmlFirstChild(host,'ip');if(ip){url=ip.textContent;var port=_utils.getXmlFirstChild(host,'port');if(port.textContent!='80'){url+=':'+port.textContent;}}else{url=domain.textContent;}if(url!=''){var parter=/(.+\\/\\/).+(\\/.+)/;this.url=this.url.replace(parter,\"$1\"+url+\"$2\");}}var stropheConn=new Strophe.Connection(this.url,{inactivity:this.inactivity,maxRetries:this.maxRetries,pollingTime:this.pollingTime});return stropheConn;};connection.prototype.getHostsByTag=function(data,tagName){var tag=_utils.getXmlFirstChild(data,tagName);if(!tag){console.log(tagName+' hosts error');return null;}var hosts=tag.getElementsByTagName('hosts');if(hosts.length==0){console.log(tagName+' hosts error2');return null;}return hosts[0].getElementsByTagName('host');};connection.prototype.getRestFromHttpDNS=function(options,type){if(this.restIndex>this.restTotal){console.log('rest hosts all tried,quit');return;}var url='';var host=this.restHosts[this.restIndex];var domain=_utils.getXmlFirstChild(host,'domain');var ip=_utils.getXmlFirstChild(host,'ip');if(ip){var port=_utils.getXmlFirstChild(host,'port');url=(location.protocol==='https:'?'https:':'http:')+'//'+ip.textContent+':'+port.textContent;}else{url=(location.protocol==='https:'?'https:':'http:')+'//'+domain.textContent;}if(url!=''){this.apiUrl=url;options.apiUrl=url;}if(type=='login'){this.login(options);}else{this.signup(options);}};connection.prototype.getHttpDNS=function(options,type){if(this.restHosts){this.getRestFromHttpDNS(options,type);return;}var self=this;var suc=function suc(data,xhr){data=new DOMParser().parseFromString(data,\"text/xml\").documentElement;//get rest ips\nvar restHosts=self.getHostsByTag(data,'rest');if(!restHosts){console.log('rest hosts error3');return;}self.restHosts=restHosts;self.restTotal=restHosts.length;//get xmpp ips\nvar xmppHosts=self.getHostsByTag(data,'xmpp');if(!xmppHosts){console.log('xmpp hosts error3');return;}self.xmppHosts=xmppHosts;self.xmppTotal=xmppHosts.length;self.getRestFromHttpDNS(options,type);};var error=function error(res,xhr,msg){console.log('getHttpDNS error',res,msg);self.dnsIndex++;if(self.dnsIndex<self.dnsTotal){self.getHttpDNS(options,type);}};var options2={url:this.dnsArr[this.dnsIndex]+'/hyphenate/server.xml',dataType:'text',type:'GET',// url: 'http://www.hyphenate.io/hyphenate/server.xml',\n// dataType: 'xml',\ndata:{app_key:encodeURIComponent(options.appKey)},success:suc||_utils.emptyfn,error:error||_utils.emptyfn};_utils.ajax(options2);};connection.prototype.signup=function(options){var self=this;var orgName=options.orgName||'';var appName=options.appName||'';var appKey=options.appKey||'';var suc=options.success||EMPTYFN;var err=options.error||EMPTYFN;if(!orgName&&!appName&&appKey){var devInfos=appKey.split('#');if(devInfos.length===2){orgName=devInfos[0];appName=devInfos[1];}}if(!orgName&&!appName){err({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR});return;}var error=function error(res,xhr,msg){if(location.protocol!='https:'&&self.isHttpDNS){if(self.restIndex+1<self.restTotal){self.restIndex++;self.getRestFromHttpDNS(options,'signup');return;}}self.clear();err(res);};var https=options.https||https;var apiUrl=options.apiUrl;var restUrl=apiUrl+'/'+orgName+'/'+appName+'/users';var userjson={username:options.username,password:options.password,nickname:options.nickname||''};var userinfo=_utils.stringify(userjson);var options2={url:restUrl,dataType:'json',data:userinfo,success:suc,error:error};_utils.ajax(options2);};connection.prototype.open=function(options){if(location.protocol!='https:'&&this.isHttpDNS){this.dnsIndex=0;this.getHttpDNS(options,'login');}else{this.login(options);}};connection.prototype.login=function(options){var pass=_validCheck(options,this);if(!pass){return;}var conn=this;if(conn.isOpened()){return;}if(options.accessToken){options.access_token=options.accessToken;conn.context.restTokenData=options;_login(options,conn);}else{var apiUrl=options.apiUrl;var userId=this.context.userId;var pwd=options.pwd||'';var appName=this.context.appName;var orgName=this.context.orgName;var suc=function suc(data,xhr){conn.context.status=_code.STATUS_DOLOGIN_IM;conn.context.restTokenData=data;if(options.success)options.success(data);_login(data,conn);};var error=function error(res,xhr,msg){if(options.error)options.error();if(location.protocol!='https:'&&conn.isHttpDNS){if(conn.restIndex+1<conn.restTotal){conn.restIndex++;conn.getRestFromHttpDNS(options,'login');return;}}conn.clear();if(res.error&&res.error_description){conn.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:res,xhr:xhr});}else{conn.onError({type:_code.WEBIM_CONNCTION_OPEN_ERROR,data:res,xhr:xhr});}};this.context.status=_code.STATUS_DOLOGIN_USERGRID;var loginJson={grant_type:'password',username:userId,password:pwd,timestamp:+new Date()};var loginfo=_utils.stringify(loginJson);var options2={url:apiUrl+'/'+orgName+'/'+appName+'/token',dataType:'json',data:loginfo,success:suc||_utils.emptyfn,error:error||_utils.emptyfn};_utils.ajax(options2);}};// attach to xmpp server for BOSH\nconnection.prototype.attach=function(options){var pass=_validCheck(options,this);if(!pass){return;}options=options||{};var accessToken=options.accessToken||'';if(accessToken==''){this.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR});return;}var sid=options.sid||'';if(sid===''){this.onError({type:_code.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR});return;}var rid=options.rid||'';if(rid===''){this.onError({type:_code.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR});return;}var stropheConn=this.getStrophe();this.context.accessToken=accessToken;this.context.stropheConn=stropheConn;this.context.status=_code.STATUS_DOLOGIN_IM;var conn=this;var callback=function callback(status,msg){_loginCallback(status,msg,conn);};var jid=this.context.jid;var wait=this.wait;var hold=this.hold;var wind=this.wind||5;stropheConn.attach(jid,sid,rid,callback,wait,hold,wind);};connection.prototype.close=function(reason){this.stopHeartBeat();var status=this.context.status;if(status==_code.STATUS_INIT){return;}if(this.isClosed()||this.isClosing()){return;}this.context.status=_code.STATUS_CLOSING;this.context.stropheConn.disconnect(reason);};connection.prototype.addHandler=function(handler,ns,name,type,id,from,options){this.context.stropheConn.addHandler(handler,ns,name,type,id,from,options);};connection.prototype.notifyVersion=function(suc,fail){var jid=_getJid({},this);var dom=$iq({from:this.context.jid||'',to:this.domain,type:'result'}).c('query',{xmlns:'jabber:iq:version'}).c('name').t('hyphenate').up().c('version').t(_version).up().c('os').t('webim');var suc=suc||_utils.emptyfn;var error=fail||this.onError;var failFn=function failFn(ele){error({type:_code.WEBIM_CONNCTION_NOTIFYVERSION_ERROR,data:ele});};this.context.stropheConn.sendIQ(dom.tree(),suc,failFn);return;};// handle all types of presence message\nconnection.prototype.handlePresence=function(msginfo){if(this.isClosed()){return;}var from=msginfo.getAttribute('from')||'';var to=msginfo.getAttribute('to')||'';var type=msginfo.getAttribute('type')||'';var presence_type=msginfo.getAttribute('presence_type')||'';var fromUser=_parseNameFromJidFn(from);var toUser=_parseNameFromJidFn(to);var isCreate=false;var info={from:fromUser,to:toUser,fromJid:from,toJid:to,type:type,chatroom:msginfo.getElementsByTagName('roomtype').length?true:false};var showTags=msginfo.getElementsByTagName('show');if(showTags&&showTags.length>0){var showTag=showTags[0];info.show=Strophe.getText(showTag);}var statusTags=msginfo.getElementsByTagName('status');if(statusTags&&statusTags.length>0){var statusTag=statusTags[0];info.status=Strophe.getText(statusTag);info.code=statusTag.getAttribute('code');}var priorityTags=msginfo.getElementsByTagName('priority');if(priorityTags&&priorityTags.length>0){var priorityTag=priorityTags[0];info.priority=Strophe.getText(priorityTag);}var error=msginfo.getElementsByTagName('error');if(error&&error.length>0){var error=error[0];info.error={code:error.getAttribute('code')};}var destroy=msginfo.getElementsByTagName('destroy');if(destroy&&destroy.length>0){var destroy=destroy[0];info.destroy=true;var reason=destroy.getElementsByTagName('reason');if(reason&&reason.length>0){info.reason=Strophe.getText(reason[0]);}}var members=msginfo.getElementsByTagName('item');if(members&&members.length>0){var member=members[0];var role=member.getAttribute('role');var jid=member.getAttribute('jid');var affiliation=member.getAttribute('affiliation');// dismissed by group\nif(role=='none'&&jid){var kickedMember=_parseNameFromJidFn(jid);var actor=member.getElementsByTagName('actor')[0];var actorNick=actor.getAttribute('nick');info.actor=actorNick;info.kicked=kickedMember;}// Service Acknowledges Room Creation `createGroupACK`\nif(role=='moderator'&&info.code=='201'){if(affiliation==='owner'){info.type='createGroupACK';isCreate=true;}else info.type='joinPublicGroupSuccess';}}var apply=msginfo.getElementsByTagName('apply');if(apply&&apply.length>0){apply=apply[0];var toNick=apply.getAttribute('toNick');var groupJid=apply.getAttribute('to');var userJid=apply.getAttribute('from');var groupName=_parseNameFromJidFn(groupJid);var userName=_parseNameFromJidFn(userJid);info.toNick=toNick;info.groupName=groupName;info.type='joinGroupNotifications';var reason=apply.getElementsByTagName('reason');if(reason&&reason.length>0){info.reason=Strophe.getText(reason[0]);}}if(info.chatroom){// diff the\ninfo.presence_type=presence_type;info.original_type=info.type;var reflectUser=from.slice(from.lastIndexOf('/')+1);if(reflectUser===this.context.userId){if(info.type===''&&!info.code){info.type='joinChatRoomSuccess';}else if(presence_type==='unavailable'||info.type==='unavailable'){if(!info.status){// logout successfully.\ninfo.type='leaveChatRoom';}else if(info.code==110){// logout or dismissied by admin.\ninfo.type='leaveChatRoom';}else if(info.error&&info.error.code==406){// The chat room is full.\ninfo.type='reachChatRoomCapacity';}}}}else{info.presence_type=presence_type;info.original_type=type;if(/subscribe/.test(info.type)){//subscribe | subscribed | unsubscribe | unsubscribed\n}else if(type==\"\"&&!info.status&&!info.error&&!isCreate){info.type='joinPublicGroupSuccess';}else if(presence_type==='unavailable'||type==='unavailable'){// There is no roomtype when a chat room is deleted.\nif(info.destroy){// Group or Chat room Deleted.\ninfo.type='deleteGroupChat';}else if(info.code==307||info.code==321){// Dismissed by group.\nvar nick=msginfo.getAttribute('nick');if(!nick)info.type='leaveGroup';else info.type='removedFromGroup';}}}this.onPresence(info,msginfo);};connection.prototype.handlePing=function(e){if(this.isClosed()){return;}var id=e.getAttribute('id');var from=e.getAttribute('from');var to=e.getAttribute('to');var dom=$iq({from:to,to:from,id:id,type:'result'});this.sendCommand(dom.tree());};connection.prototype.handleIq=function(iq){return true;};connection.prototype.handleIqPrivacy=function(msginfo){var list=msginfo.getElementsByTagName('list');if(list.length==0){return;}this.getBlacklist();};connection.prototype.handleIqRoster=function(e){var id=e.getAttribute('id');var from=e.getAttribute('from')||'';var name=_parseNameFromJidFn(from);var curJid=this.context.jid;var curUser=this.context.userId;var iqresult=$iq({type:'result',id:id,from:curJid});this.sendCommand(iqresult.tree());var msgBodies=e.getElementsByTagName('query');if(msgBodies&&msgBodies.length>0){var queryTag=msgBodies[0];var rouster=_parseFriend(queryTag,this,from);this.onRoster(rouster);}return true;};connection.prototype.handleMessage=function(msginfo){var self=this;if(this.isClosed()){return;}var id=msginfo.getAttribute('id')||'';// cache ack into sendQueue first , handelSendQueue will do the send thing with the speed of  5/s\nthis.cacheReceiptsMessage({id:id});var parseMsgData=_parseResponseMessage(msginfo);if(parseMsgData.errorMsg){this.handlePresence(msginfo);return;}// send error\nvar error=msginfo.getElementsByTagName('error');var errorCode='';var errorText='';var errorBool=false;if(error.length>0){errorBool=true;errorCode=error[0].getAttribute('code');var textDOM=error[0].getElementsByTagName('text');errorText=textDOM[0].textContent||textDOM[0].text;log('handle error',errorCode,errorText);}var msgDatas=parseMsgData.data;for(var i in msgDatas){if(!msgDatas.hasOwnProperty(i)){continue;}var msg=msgDatas[i];if(!msg.from||!msg.to){continue;}var from=(msg.from+'').toLowerCase();var too=(msg.to+'').toLowerCase();var extmsg=msg.ext||{};var chattype='';var typeEl=msginfo.getElementsByTagName('roomtype');if(typeEl.length){chattype=typeEl[0].getAttribute('type')||'chat';}else{chattype=msginfo.getAttribute('type')||'chat';}var msgBodies=msg.bodies;if(!msgBodies||msgBodies.length==0){continue;}var msgBody=msg.bodies[0];var type=msgBody.type;try{switch(type){case'txt':var receiveMsg=msgBody.msg;var emojibody=_utils.parseTextMessage(receiveMsg,WebIM.Emoji);if(emojibody.isemoji){var msg={id:id,type:chattype,from:from,to:too,delay:parseMsgData.delayTimeStamp,data:emojibody.body,ext:extmsg};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onEmojiMessage(msg);}else{var msg={id:id,type:chattype,from:from,to:too,delay:parseMsgData.delayTimeStamp,data:receiveMsg,ext:extmsg};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onTextMessage(msg);}break;case'img':var rwidth=0;var rheight=0;if(msgBody.size){rwidth=msgBody.size.width;rheight=msgBody.size.height;}var msg={id:id,type:chattype,from:from,to:too,url:location.protocol!='https:'&&self.isHttpDNS?self.apiUrl+msgBody.url.substr(msgBody.url.indexOf(\"/\",9)):msgBody.url,secret:msgBody.secret,filename:msgBody.filename,thumb:msgBody.thumb,thumb_secret:msgBody.thumb_secret,file_length:msgBody.file_length||'',width:rwidth,height:rheight,filetype:msgBody.filetype||'',accessToken:this.context.accessToken||'',ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onPictureMessage(msg);break;case'audio':var msg={id:id,type:chattype,from:from,to:too,url:location.protocol!='https:'&&self.isHttpDNS?self.apiUrl+msgBody.url.substr(msgBody.url.indexOf(\"/\",9)):msgBody.url,secret:msgBody.secret,filename:msgBody.filename,length:msgBody.length||'',file_length:msgBody.file_length||'',filetype:msgBody.filetype||'',accessToken:this.context.accessToken||'',ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onAudioMessage(msg);break;case'file':var msg={id:id,type:chattype,from:from,to:too,url:location.protocol!='https:'&&self.isHttpDNS?self.apiUrl+msgBody.url.substr(msgBody.url.indexOf(\"/\",9)):msgBody.url,secret:msgBody.secret,filename:msgBody.filename,file_length:msgBody.file_length,accessToken:this.context.accessToken||'',ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onFileMessage(msg);break;case'loc':var msg={id:id,type:chattype,from:from,to:too,addr:msgBody.addr,lat:msgBody.lat,lng:msgBody.lng,ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onLocationMessage(msg);break;case'video':var msg={id:id,type:chattype,from:from,to:too,url:location.protocol!='https:'&&self.isHttpDNS?self.apiUrl+msgBody.url.substr(msgBody.url.indexOf(\"/\",9)):msgBody.url,secret:msgBody.secret,filename:msgBody.filename,file_length:msgBody.file_length,accessToken:this.context.accessToken||'',ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onVideoMessage(msg);break;case'cmd':var msg={id:id,from:from,to:too,action:msgBody.action,ext:extmsg,delay:parseMsgData.delayTimeStamp};!msg.delay&&delete msg.delay;msg.error=errorBool;msg.errorText=errorText;msg.errorCode=errorCode;this.onCmdMessage(msg);break;};}catch(e){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e});}}};connection.prototype.handleReceivedMessage=function(message){try{this.onReceivedMessage(message);}catch(e){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e});}var rcv=message.getElementsByTagName('received'),id,mid;if(rcv.length>0){if(rcv[0].childNodes&&rcv[0].childNodes.length>0){id=rcv[0].childNodes[0].nodeValue;}else{id=rcv[0].innerHTML||rcv[0].innerText;}mid=rcv[0].getAttribute('mid');}if(_msgHash[id]){try{_msgHash[id].msg.success instanceof Function&&_msgHash[id].msg.success(id,mid);}catch(e){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e});}delete _msgHash[id];}};connection.prototype.handleInviteMessage=function(message){var form=null;var invitemsg=message.getElementsByTagName('invite');var reasonDom=message.getElementsByTagName('reason')[0];var reasonMsg=reasonDom.textContent;var id=message.getAttribute('id')||'';this.sendReceiptsMessage({id:id});if(invitemsg&&invitemsg.length>0){var fromJid=invitemsg[0].getAttribute('from');form=_parseNameFromJidFn(fromJid);}var xmsg=message.getElementsByTagName('x');var roomid=null;if(xmsg&&xmsg.length>0){for(var i=0;i<xmsg.length;i++){if('jabber:x:conference'===xmsg[i].namespaceURI){var roomjid=xmsg[i].getAttribute('jid');roomid=_parseNameFromJidFn(roomjid);}}}this.onInviteMessage({type:'invite',from:form,roomid:roomid,reason:reasonMsg});};connection.prototype.sendCommand=function(dom,id){if(this.isOpened()){this.context.stropheConn.send(dom);}else{this.onError({type:_code.WEBIM_CONNCTION_DISCONNECTED,reconnect:true});}};connection.prototype.getUniqueId=function(prefix){var cdate=new Date();var offdate=new Date(2010,1,1);var offset=cdate.getTime()-offdate.getTime();var hexd=parseInt(offset).toString(16);if(typeof prefix==='string'||typeof prefix==='number'){return prefix+'_'+hexd;}else{return'WEBIM_'+hexd;}};connection.prototype.send=function(message){var self=this;if(this.isWindowSDK){WebIM.doQuery('{\"type\":\"sendMessage\",\"to\":\"'+message.to+'\",\"message_type\":\"'+message.type+'\",\"msg\":\"'+encodeURI(message.msg)+'\",\"chatType\":\"'+message.chatType+'\"}',function(response){},function(code,msg){var message={data:{data:\"send\"},type:_code.WEBIM_MESSAGE_SED_ERROR};self.onError(message);});}else{if(Object.prototype.toString.call(message)==='[object Object]'){var appKey=this.context.appKey||'';var toJid=appKey+'_'+message.to+'@'+this.domain;if(message.group){toJid=appKey+'_'+message.to+'@conference.'+this.domain;}if(message.resource){toJid=toJid+'/'+message.resource;}message.toJid=toJid;message.id=message.id||this.getUniqueId();_msgHash[message.id]=new _message(message);_msgHash[message.id].send(this);}else if(typeof message==='string'){_msgHash[message]&&_msgHash[message].send(this);}}};connection.prototype.addRoster=function(options){var jid=_getJid(options,this);var name=options.name||'';var groups=options.groups||'';var iq=$iq({type:'set'});iq.c('query',{xmlns:'jabber:iq:roster'});iq.c('item',{jid:jid,name:name});if(groups){for(var i=0;i<groups.length;i++){iq.c('group').t(groups[i]).up();}}var suc=options.success||_utils.emptyfn;var error=options.error||_utils.emptyfn;this.context.stropheConn.sendIQ(iq.tree(),suc,error);};connection.prototype.removeRoster=function(options){var jid=_getJid(options,this);var iq=$iq({type:'set'}).c('query',{xmlns:'jabber:iq:roster'}).c('item',{jid:jid,subscription:'remove'});var suc=options.success||_utils.emptyfn;var error=options.error||_utils.emptyfn;this.context.stropheConn.sendIQ(iq,suc,error);};connection.prototype.getRoster=function(options){var conn=this;var dom=$iq({type:'get'}).c('query',{xmlns:'jabber:iq:roster'});var options=options||{};var suc=options.success||this.onRoster;var completeFn=function completeFn(ele){var rouster=[];var msgBodies=ele.getElementsByTagName('query');if(msgBodies&&msgBodies.length>0){var queryTag=msgBodies[0];rouster=_parseFriend(queryTag);}suc(rouster,ele);};var error=options.error||this.onError;var failFn=function failFn(ele){error({type:_code.WEBIM_CONNCTION_GETROSTER_ERROR,data:ele});};if(this.isOpened()){this.context.stropheConn.sendIQ(dom.tree(),completeFn,failFn);}else{error({type:_code.WEBIM_CONNCTION_DISCONNECTED});}};connection.prototype.subscribe=function(options){var jid=_getJid(options,this);var pres=$pres({to:jid,type:'subscribe'});if(options.message){pres.c('status').t(options.message).up();}if(options.nick){pres.c('nick',{'xmlns':'http://jabber.org/protocol/nick'}).t(options.nick);}this.sendCommand(pres.tree());};connection.prototype.subscribed=function(options){var jid=_getJid(options,this);var pres=$pres({to:jid,type:'subscribed'});if(options.message){pres.c('status').t(options.message).up();}this.sendCommand(pres.tree());};connection.prototype.unsubscribe=function(options){var jid=_getJid(options,this);var pres=$pres({to:jid,type:'unsubscribe'});if(options.message){pres.c('status').t(options.message);}this.sendCommand(pres.tree());};connection.prototype.unsubscribed=function(options){var jid=_getJid(options,this);var pres=$pres({to:jid,type:'unsubscribed'});if(options.message){pres.c('status').t(options.message).up();}this.sendCommand(pres.tree());};connection.prototype.joinPublicGroup=function(options){var roomJid=this.context.appKey+'_'+options.roomId+'@conference.'+this.domain;var room_nick=roomJid+'/'+this.context.userId;var suc=options.success||_utils.emptyfn;var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_JOINROOM_ERROR,data:ele});};var iq=$pres({from:this.context.jid,to:room_nick}).c('x',{xmlns:Strophe.NS.MUC});this.context.stropheConn.sendIQ(iq.tree(),suc,errorFn);};connection.prototype.listRooms=function(options){var iq=$iq({to:options.server||'conference.'+this.domain,from:this.context.jid,type:'get'}).c('query',{xmlns:Strophe.NS.DISCO_ITEMS});var suc=options.success||_utils.emptyfn;var error=options.error||this.onError;var completeFn=function completeFn(result){var rooms=[];rooms=_parseRoom(result);try{suc(rooms);}catch(e){error({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:e});}};var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:ele});};this.context.stropheConn.sendIQ(iq.tree(),completeFn,errorFn);};connection.prototype.queryRoomMember=function(options){var domain=this.domain;var members=[];var iq=$iq({to:this.context.appKey+'_'+options.roomId+'@conference.'+this.domain,type:'get'}).c('query',{xmlns:Strophe.NS.MUC+'#admin'}).c('item',{affiliation:'member'});var suc=options.success||_utils.emptyfn;var completeFn=function completeFn(result){var items=result.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var mem={jid:item.getAttribute('jid'),affiliation:'member'};members.push(mem);}}suc(members);};var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_GETROOMMEMBER_ERROR,data:ele});};this.context.stropheConn.sendIQ(iq.tree(),completeFn,errorFn);};connection.prototype.queryRoomInfo=function(options){var domain=this.domain;var iq=$iq({to:this.context.appKey+'_'+options.roomId+'@conference.'+domain,type:'get'}).c('query',{xmlns:Strophe.NS.DISCO_INFO});var suc=options.success||_utils.emptyfn;var members=[];var completeFn=function completeFn(result){var settings='';var features=result.getElementsByTagName('feature');if(features){settings=features[1].getAttribute('var')+'|'+features[3].getAttribute('var')+'|'+features[4].getAttribute('var');}switch(settings){case'muc_public|muc_membersonly|muc_notallowinvites':settings='PUBLIC_JOIN_APPROVAL';break;case'muc_public|muc_open|muc_notallowinvites':settings='PUBLIC_JOIN_OPEN';break;case'muc_hidden|muc_membersonly|muc_allowinvites':settings='PRIVATE_MEMBER_INVITE';break;case'muc_hidden|muc_membersonly|muc_notallowinvites':settings='PRIVATE_OWNER_INVITE';break;}var owner='';var fields=result.getElementsByTagName('field');var fieldValues={};if(fields){for(var i=0;i<fields.length;i++){var field=fields[i];var fieldVar=field.getAttribute('var');var fieldSimplify=fieldVar.split('_')[1];switch(fieldVar){case'muc#roominfo_occupants':case'muc#roominfo_maxusers':case'muc#roominfo_affiliations':case'muc#roominfo_description':fieldValues[fieldSimplify]=field.textContent||field.text||'';break;case'muc#roominfo_owner':var mem={jid:(field.textContent||field.text)+'@'+domain,affiliation:'owner'};members.push(mem);fieldValues[fieldSimplify]=field.textContent||field.text;break;}// if (field.getAttribute('label') === 'owner') {\n//     var mem = {\n//         jid: (field.textContent || field.text) + '@' + domain\n//         , affiliation: 'owner'\n//     };\n//     members.push(mem);\n//     break;\n// }\n}fieldValues['name']=result.getElementsByTagName('identity')[0].getAttribute('name');}log(settings,members,fieldValues);suc(settings,members,fieldValues);};var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_GETROOMINFO_ERROR,data:ele});};this.context.stropheConn.sendIQ(iq.tree(),completeFn,errorFn);};connection.prototype.queryRoomOccupants=function(options){var suc=options.success||_utils.emptyfn;var completeFn=function completeFn(result){var occupants=[];occupants=_parseRoomOccupants(result);suc(occupants);};var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR,data:ele});};var attrs={xmlns:Strophe.NS.DISCO_ITEMS};var info=$iq({from:this.context.jid,to:this.context.appKey+'_'+options.roomId+'@conference.'+this.domain,type:'get'}).c('query',attrs);this.context.stropheConn.sendIQ(info.tree(),completeFn,errorFn);};connection.prototype.setUserSig=function(desc){var dom=$pres({xmlns:'jabber:client'});desc=desc||'';dom.c('status').t(desc);this.sendCommand(dom.tree());};connection.prototype.setPresence=function(type,status){var dom=$pres({xmlns:'jabber:client'});if(type){if(status){dom.c('show').t(type);dom.up().c('status').t(status);}else{dom.c('show').t(type);}}this.sendCommand(dom.tree());};connection.prototype.getPresence=function(){var dom=$pres({xmlns:'jabber:client'});var conn=this;this.sendCommand(dom.tree());};connection.prototype.ping=function(options){var options=options||{};var jid=_getJid(options,this);var dom=$iq({from:this.context.jid||'',to:jid,type:'get'}).c('ping',{xmlns:'urn:xmpp:ping'});var suc=options.success||_utils.emptyfn;var error=options.error||this.onError;var failFn=function failFn(ele){error({type:_code.WEBIM_CONNCTION_PING_ERROR,data:ele});};if(this.isOpened()){this.context.stropheConn.sendIQ(dom.tree(),suc,failFn);}else{error({type:_code.WEBIM_CONNCTION_DISCONNECTED});}return;};connection.prototype.isOpened=function(){return this.context.status==_code.STATUS_OPENED;};connection.prototype.isOpening=function(){var status=this.context.status;return status==_code.STATUS_DOLOGIN_USERGRID||status==_code.STATUS_DOLOGIN_IM;};connection.prototype.isClosing=function(){return this.context.status==_code.STATUS_CLOSING;};connection.prototype.isClosed=function(){return this.context.status==_code.STATUS_CLOSED;};connection.prototype.clear=function(){var key=this.context.appKey;if(this.errorType!=_code.WEBIM_CONNCTION_DISCONNECTED){this.context={status:_code.STATUS_INIT,appKey:key};}if(this.intervalId){clearInterval(this.intervalId);}this.restIndex=0;this.xmppIndex=0;if(this.errorType==_code.WEBIM_CONNCTION_CLIENT_LOGOUT||this.errorType==-1){var message={data:{data:\"logout\"},type:_code.WEBIM_CONNCTION_CLIENT_LOGOUT};this.onError(message);}};connection.prototype.getChatRooms=function(options){if(!_utils.isCanSetRequestHeader){conn.onError({type:_code.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR});return;}var conn=this,token=options.accessToken||this.context.accessToken;if(token){var apiUrl=options.apiUrl;var appName=this.context.appName;var orgName=this.context.orgName;if(!appName||!orgName){conn.onError({type:_code.WEBIM_CONNCTION_AUTH_ERROR});return;}var suc=function suc(data,xhr){typeof options.success==='function'&&options.success(data);};var error=function error(res,xhr,msg){if(res.error&&res.error_description){conn.onError({type:_code.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,msg:res.error_description,data:res,xhr:xhr});}};var pageInfo={pagenum:parseInt(options.pagenum)||1,pagesize:parseInt(options.pagesize)||20};var opts={url:apiUrl+'/'+orgName+'/'+appName+'/chatrooms',dataType:'json',type:'GET',headers:{'Authorization':'Bearer '+token},data:pageInfo,success:suc||_utils.emptyfn,error:error||_utils.emptyfn};_utils.ajax(opts);}else{conn.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR});}};connection.prototype.joinChatRoom=function(options){var roomJid=this.context.appKey+'_'+options.roomId+'@conference.'+this.domain;var room_nick=roomJid+'/'+this.context.userId;var suc=options.success||_utils.emptyfn;var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_JOINCHATROOM_ERROR,data:ele});};var iq=$pres({from:this.context.jid,to:room_nick}).c('x',{xmlns:Strophe.NS.MUC+'#user'}).c('item',{affiliation:'member',role:'participant'}).up().up().c('roomtype',{xmlns:'hyphenate:x:roomtype',type:'chatroom'});this.context.stropheConn.sendIQ(iq.tree(),suc,errorFn);};connection.prototype.quitChatRoom=function(options){var roomJid=this.context.appKey+'_'+options.roomId+'@conference.'+this.domain;var room_nick=roomJid+'/'+this.context.userId;var suc=options.success||_utils.emptyfn;var err=options.error||_utils.emptyfn;var errorFn=function errorFn(ele){err({type:_code.WEBIM_CONNCTION_QUITCHATROOM_ERROR,data:ele});};var iq=$pres({from:this.context.jid,to:room_nick,type:'unavailable'}).c('x',{xmlns:Strophe.NS.MUC+'#user'}).c('item',{affiliation:'none',role:'none'}).up().up().c('roomtype',{xmlns:'hyphenate:x:roomtype',type:'chatroom'});this.context.stropheConn.sendIQ(iq.tree(),suc,errorFn);};connection.prototype._onReceiveInviteFromGroup=function(info){info=eval('('+info+')');var self=this;var options={title:\"Group invitation\",msg:info.user+\" invites you to join into group:\"+info.group_id,agree:function agree(){WebIM.doQuery('{\"type\":\"acceptInvitationFromGroup\",\"id\":\"'+info.group_id+'\",\"user\":\"'+info.user+'\"}',function(response){},function(code,msg){var message={data:{data:\"acceptInvitationFromGroup error:\"+msg},type:_code.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP};self.onError(message);});},reject:function reject(){WebIM.doQuery('{\"type\":\"declineInvitationFromGroup\",\"id\":\"'+info.group_id+'\",\"user\":\"'+info.user+'\"}',function(response){},function(code,msg){var message={data:{data:\"declineInvitationFromGroup error:\"+msg},type:_code.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP};self.onError(message);});}};this.onConfirmPop(options);};connection.prototype._onReceiveInviteAcceptionFromGroup=function(info){info=eval('('+info+')');var options={title:\"Group invitation response\",msg:info.user+\" agreed to join into group:\"+info.group_id,agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onReceiveInviteDeclineFromGroup=function(info){info=eval('('+info+')');var options={title:\"Group invitation response\",msg:info.user+\" rejected to join into group:\"+info.group_id,agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onAutoAcceptInvitationFromGroup=function(info){info=eval('('+info+')');var options={title:\"Group invitation\",msg:\"You had joined into the group:\"+info.group_name+\" automatically.Inviter:\"+info.user,agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onLeaveGroup=function(info){info=eval('('+info+')');var options={title:\"Group notification\",msg:\"You have been out of the group:\"+info.group_id+\".Reason:\"+info.msg,agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onReceiveJoinGroupApplication=function(info){info=eval('('+info+')');var self=this;var options={title:\"Group join application\",msg:info.user+\" applys to join into group:\"+info.group_id,agree:function agree(){WebIM.doQuery('{\"type\":\"acceptJoinGroupApplication\",\"id\":\"'+info.group_id+'\",\"user\":\"'+info.user+'\"}',function(response){},function(code,msg){var message={data:{data:\"acceptJoinGroupApplication error:\"+msg},type:_code.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP};self.onError(message);});},reject:function reject(){WebIM.doQuery('{\"type\":\"declineJoinGroupApplication\",\"id\":\"'+info.group_id+'\",\"user\":\"'+info.user+'\"}',function(response){},function(code,msg){var message={data:{data:\"declineJoinGroupApplication error:\"+msg},type:_code.WEBIM_CONNECTION_DECLINE_JOIN_GROUP};self.onError(message);});}};this.onConfirmPop(options);};connection.prototype._onReceiveAcceptionFromGroup=function(info){info=eval('('+info+')');var options={title:\"Group notification\",msg:\"You had joined into the group:\"+info.group_name+\".\",agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onReceiveRejectionFromGroup=function(){info=eval('('+info+')');var options={title:\"Group notification\",msg:\"You have been rejected to join into the group:\"+info.group_name+\".\",agree:function agree(){}};this.onConfirmPop(options);};connection.prototype._onUpdateMyGroupList=function(options){this.onUpdateMyGroupList(options);};connection.prototype._onUpdateMyRoster=function(options){this.onUpdateMyRoster(options);};connection.prototype.reconnect=function(){var that=this;setTimeout(function(){_login(that.context.restTokenData,that);},(this.autoReconnectNumTotal==0?0:this.autoReconnectInterval)*1000);this.autoReconnectNumTotal++;};connection.prototype.closed=function(){var message={data:{data:\"Closed error\"},type:_code.WEBIM_CONNECTION_CLOSED};this.onError(message);};// used for blacklist\nfunction _parsePrivacy(iq){var list=[];var items=iq.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var jid=item.getAttribute('value');var order=item.getAttribute('order');var type=item.getAttribute('type');if(!jid){continue;}var n=_parseNameFromJidFn(jid);list[n]={type:type,order:order,jid:jid,name:n};}}return list;};// used for blacklist\nconnection.prototype.getBlacklist=function(options){options=options||{};var iq=$iq({type:'get'});var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var me=this;iq.c('query',{xmlns:'jabber:iq:privacy'}).c('list',{name:'special'});this.context.stropheConn.sendIQ(iq.tree(),function(iq){me.onBlacklistUpdate(_parsePrivacy(iq));sucFn();},function(){me.onBlacklistUpdate([]);errFn();});};// used for blacklist\nconnection.prototype.addToBlackList=function(options){var iq=$iq({type:'set'});var blacklist=options.list||{};var type=options.type||'jid';var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var piece=iq.c('query',{xmlns:'jabber:iq:privacy'}).c('list',{name:'special'});var keys=Object.keys(blacklist);var len=keys.length;var order=2;for(var i=0;i<len;i++){var item=blacklist[keys[i]];var type=item.type||'jid';var jid=item.jid;piece=piece.c('item',{action:'deny',order:order++,type:type,value:jid}).c('message');if(i!==len-1){piece=piece.up().up();}}// log('addToBlackList', blacklist, piece.tree());\nthis.context.stropheConn.sendIQ(piece.tree(),sucFn,errFn);};// used for blacklist\nconnection.prototype.removeFromBlackList=function(options){var iq=$iq({type:'set'});var blacklist=options.list||{};var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var piece=iq.c('query',{xmlns:'jabber:iq:privacy'}).c('list',{name:'special'});var keys=Object.keys(blacklist);var len=keys.length;for(var i=0;i<len;i++){var item=blacklist[keys[i]];var type=item.type||'jid';var jid=item.jid;var order=item.order;piece=piece.c('item',{action:'deny',order:order,type:type,value:jid}).c('message');if(i!==len-1){piece=piece.up().up();}}// log('removeFromBlackList', blacklist, piece.tree());\nthis.context.stropheConn.sendIQ(piece.tree(),sucFn,errFn);};connection.prototype._getGroupJid=function(to){var appKey=this.context.appKey||'';return appKey+'_'+to+'@conference.'+this.domain;};// used for blacklist\nconnection.prototype.addToGroupBlackList=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var jid=_getJid(options,this);var affiliation='admin';//options.affiliation || 'admin';\nvar to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('item',{affiliation:'outcast',jid:jid});this.context.stropheConn.sendIQ(iq.tree(),sucFn,errFn);};function _parseGroupBlacklist(iq){var list={};var items=iq.getElementsByTagName('item');if(items){for(var i=0;i<items.length;i++){var item=items[i];var jid=item.getAttribute('jid');var affiliation=item.getAttribute('affiliation');var nick=item.getAttribute('nick');if(!jid){continue;}var n=_parseNameFromJidFn(jid);list[n]={jid:jid,affiliation:affiliation,nick:nick,name:n};}}return list;}// used for blacklist\nconnection.prototype.getGroupBlacklist=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;// var jid = _getJid(options, this);\nvar affiliation='admin';//options.affiliation || 'admin';\nvar to=this._getGroupJid(options.roomId);var iq=$iq({type:'get',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('item',{affiliation:'outcast'});this.context.stropheConn.sendIQ(iq.tree(),function(msginfo){log('getGroupBlackList');sucFn(_parseGroupBlacklist(msginfo));},function(){errFn();});};// used for blacklist\nconnection.prototype.removeGroupMemberFromBlacklist=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var jid=_getJid(options,this);var affiliation='admin';//options.affiliation || 'admin';\nvar to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('item',{affiliation:'none',jid:jid});this.context.stropheConn.sendIQ(iq.tree(),function(msginfo){sucFn();},function(){errFn();});};/**\n\t * changeGroupSubject 修改群名称\n\t *\n\t * @param options\n\t */// <iq to='hyphenatedemo#chatdemoui_roomid@conference.hyphenate.io' type='set' id='3940489311' xmlns='jabber:client'>\n//     <query xmlns='http://jabber.org/protocol/muc#owner'>\n//         <x type='submit' xmlns='jabber:x:data'>\n//             <field var='FORM_TYPE'><value>http://jabber.org/protocol/muc#roomconfig</value></field>\n//             <field var='muc#roomconfig_roomname'><value>Room Name</value></field>\n//         </x>\n//     </query>\n// </iq>\nconnection.prototype.changeGroupSubject=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;// must be `owner`\nvar affiliation='owner';var to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('x',{type:'submit',xmlns:'jabber:x:data'}).c('field',{'var':'FORM_TYPE'}).c('value').t('http://jabber.org/protocol/muc#roomconfig').up().up().c('field',{'var':'muc#roomconfig_roomname'}).c('value').t(options.subject).up().up().c('field',{'var':'muc#roomconfig_roomdesc'}).c('value').t(options.description);this.context.stropheConn.sendIQ(iq.tree(),function(msginfo){sucFn();},function(){errFn();});};/**\n\t * destroyGroup 删除群组\n\t *\n\t * @param options\n\t */// <iq id=\"9BEF5D20-841A-4048-B33A-F3F871120E58\" to=\"hyphenatedemo#chatdemoui_1477462231499@conference.hyphenate.io\" type=\"set\">\n//     <query xmlns=\"http://jabber.org/protocol/muc#owner\">\n//         <destroy>\n//             <reason>xxx destory group yyy</reason>\n//         </destroy>\n//     </query>\n// </iq>\nconnection.prototype.destroyGroup=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;// must be `owner`\nvar affiliation='owner';var to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('destroy').c('reason').t(options.reason||'');this.context.stropheConn.sendIQ(iq.tree(),function(msginfo){sucFn();},function(){errFn();});};/**\n\t * leaveGroupBySelf 主动离开群组\n\t *\n\t * @param options\n\t */// <iq id=\"5CD33172-7B62-41B7-98BC-CE6EF840C4F6_hyphenate_occupants_change_affiliation\" to=\"hyphenatedemo#chatdemoui_1477481609392@conference.hyphenate.io\" type=\"set\">\n//     <query xmlns=\"http://jabber.org/protocol/muc#admin\">\n//         <item affiliation=\"none\" jid=\"hyphenatedemo#chatdemoui_lwz2@hyphenate.io\"/>\n//     </query>\n// </iq>\n// <presence to=\"hyphenatedemo#chatdemoui_1479811172349@conference.hyphenate.io/mt002\" type=\"unavailable\"/>\nconnection.prototype.leaveGroupBySelf=function(options){var self=this;var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;// must be `owner`\nvar jid=_getJid(options,this);var affiliation='admin';var to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation}).c('item',{affiliation:'none',jid:jid});this.context.stropheConn.sendIQ(iq.tree(),function(msgInfo){sucFn(msgInfo);var pres=$pres({type:'unavailable',to:to+'/'+self.context.userId});self.sendCommand(pres.tree());},function(errInfo){errFn(errInfo);});};/**\n\t * leaveGroup 被踢出群组\n\t *\n\t * @param options\n\t */// <iq id=\"9fb25cf4-1183-43c9-961e-9df70e300de4:sendIQ\" to=\"hyphenatedemo#chatdemoui_1477481597120@conference.hyphenate.io\" type=\"set\" xmlns=\"jabber:client\">\n//     <query xmlns=\"http://jabber.org/protocol/muc#admin\">\n//         <item affiliation=\"none\" jid=\"hyphenatedemo#chatdemoui_lwz4@hyphenate.io\"/>\n//         <item jid=\"hyphenatedemo#chatdemoui_lwz4@hyphenate.io\" role=\"none\"/>\n//         <item affiliation=\"none\" jid=\"hyphenatedemo#chatdemoui_lwz2@hyphenate.io\"/>\n//         <item jid=\"hyphenatedemo#chatdemoui_lwz2@hyphenate.io\" role=\"none\"/>\n//     </query>\n// </iq>\nconnection.prototype.leaveGroup=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var list=options.list||[];var affiliation='admin';var to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});var piece=iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation});var keys=Object.keys(list);var len=keys.length;for(var i=0;i<len;i++){var name=list[keys[i]];var jid=_getJidByName(name,this);piece=piece.c('item',{affiliation:'none',jid:jid}).up().c('item',{role:'none',jid:jid}).up();}this.context.stropheConn.sendIQ(iq.tree(),function(msgInfo){sucFn(msgInfo);},function(errInfo){errFn(errInfo);});};/**\n\t * addGroupMembers 添加群组成员\n\t *\n\t * @param options\n\n\t Attention the sequence: message first (每个成员单独发一条message), iq second (多个成员可以合成一条iq发)\n\t <!-- 添加成员通知：send -->\n\t <message to='hyphenatedemo#chatdemoui_1477482739698@conference.hyphenate.io'>\n\t <x xmlns='http://jabber.org/protocol/muc#user'>\n\t <invite to='hyphenatedemo#chatdemoui_lwz2@hyphenate.io'>\n\t <reason>liuwz invite you to join group '谢谢'</reason>\n\t </invite>\n\t </x>\n\t </message>\n\t <!-- 添加成员：send -->\n\t <iq id='09DFB1E5-C939-4C43-B5A7-8000DA0E3B73_hyphenate_occupants_change_affiliation' to='hyphenatedemo#chatdemoui_1477482739698@conference.hyphenate.io' type='set'>\n\t <query xmlns='http://jabber.org/protocol/muc#admin'>\n\t <item affiliation='member' jid='hyphenatedemo#chatdemoui_lwz2@hyphenate.io'/>\n\t </query>\n\t </iq>\n\t */connection.prototype.addGroupMembers=function(options){var sucFn=options.success||_utils.emptyfn;var errFn=options.error||_utils.emptyfn;var list=options.list||[];var affiliation='admin';var to=this._getGroupJid(options.roomId);var iq=$iq({type:'set',to:to});var piece=iq.c('query',{xmlns:'http://jabber.org/protocol/muc#'+affiliation});var len=list.length;for(var i=0;i<len;i++){var name=list[i];var jid=_getJidByName(name,this);piece=piece.c('item',{affiliation:'member',jid:jid}).up();var dom=$msg({to:to}).c('x',{xmlns:'http://jabber.org/protocol/muc#user'}).c('invite',{to:jid}).c('reason').t(options.reason||'');this.sendCommand(dom.tree());}this.context.stropheConn.sendIQ(iq.tree(),function(msgInfo){sucFn(msgInfo);},function(errInfo){errFn(errInfo);});};/**\n\t * acceptInviteFromGroup 接受加入申请\n\t *\n\t * @param options\n\t */connection.prototype.acceptInviteFromGroup=function(options){options.success=function(){// then send sendAcceptInviteMessage\n// connection.prototype.sendAcceptInviteMessage(optoins);\n};this.addGroupMembers(options);};/**\n\t * rejectInviteFromGroup 拒绝入群申请\n\t *\n\t * throw request for now 暂时不处理，直接丢弃\n\t *\n\t <message to='hyphenatedemo#chatdemoui_mt002@hyphenate.io' from='easmeob-demo#chatdemoui_mt001@hyphenate.io' id='B83B7210-BCFF-4DEE-AB28-B9FE5579C1E2'>\n\t <x xmlns='http://jabber.org/protocol/muc#user'>\n\t <apply to='hyphenatedemo#chatdemoui_groupid1@conference.hyphenate.io' from='easmeob-demo#chatdemoui_mt001@hyphenate.io' toNick='llllll'>\n\t <reason>reject</reason>\n\t </apply>\n\t </x>\n\t </message>\n\t *\n\t * @param options\n\t */connection.prototype.rejectInviteFromGroup=function(options){// var from = _getJidByName(options.from, this);\n// var dom = $msg({\n//     from: from,\n//     to: _getJidByName(options.to, this)\n// }).c('x', {\n//     xmlns: 'http://jabber.org/protocol/muc#user'\n// }).c('apply', {\n//     from: from,\n//     to: this._getGroupJid(options.groupId),\n//     toNick: options.groupName\n// }).c('reason').t(options.reason || '');\n//\n// this.sendCommand(dom.tree());\n};connection.prototype.createGroupAsync=function(p){var roomId=p.from;var me=this;var toRoom=this._getGroupJid(roomId);var to=toRoom+'/'+this.context.userId;var options=this.groupOption;var suc=p.success||_utils.emptyfn;// Creating a Reserved Room\nvar iq=$iq({type:'get',to:toRoom}).c('query',{xmlns:'http://jabber.org/protocol/muc#owner'});// Strophe.info('step 1 ----------');\n// Strophe.info(options);\nme.context.stropheConn.sendIQ(iq.tree(),function(msgInfo){// log(msgInfo);\n// for ie hack\nif('setAttribute'in msgInfo){// Strophe.info('step 3 ----------');\nvar x=msgInfo.getElementsByTagName('x')[0];x.setAttribute('type','submit');}else{// Strophe.info('step 4 ----------');\nStrophe.forEachChild(msgInfo,'x',function(field){field.setAttribute('type','submit');});}Strophe.info('step 5 ----------');Strophe.forEachChild(x,'field',function(field){var fieldVar=field.getAttribute('var');var valueDom=field.getElementsByTagName('value')[0];Strophe.info(fieldVar);switch(fieldVar){case'muc#roomconfig_roomname':_setText(valueDom,options.subject||'');break;case'muc#roomconfig_roomdesc':_setText(valueDom,options.description||'');break;case'muc#roomconfig_publicroom':// public 1\n_setText(valueDom,+options.optionsPublic);break;case'muc#roomconfig_membersonly':_setText(valueDom,+options.optionsMembersOnly);break;case'muc#roomconfig_moderatedroom':_setText(valueDom,+options.optionsModerate);break;case'muc#roomconfig_persistentroom':_setText(valueDom,1);break;case'muc#roomconfig_allowinvites':_setText(valueDom,+options.optionsAllowInvites);break;case'muc#roomconfig_allowvisitornickchange':_setText(valueDom,0);break;case'muc#roomconfig_allowvisitorstatus':_setText(valueDom,0);break;case'allow_private_messages':_setText(valueDom,0);break;case'allow_private_messages_from_visitors':_setText(valueDom,'nobody');break;default:break;}});var iq=$iq({to:toRoom,type:'set'}).c('query',{xmlns:'http://jabber.org/protocol/muc#owner'}).cnode(x);me.context.stropheConn.sendIQ(iq.tree(),function(msgInfo){me.addGroupMembers({list:options.members,roomId:roomId});suc(options);},function(errInfo){// errFn(errInfo);\n});// sucFn(msgInfo);\n},function(errInfo){// errFn(errInfo);\n});};/**\n\t * createGroup 创建群组\n\t *\n\t * 1. 创建申请 -> 得到房主身份\n\t * 2. 获取房主信息 -> 得到房间form\n\t * 3. 完善房间form -> 创建成功\n\t * 4. 添加房间成员\n\t * 5. 消息通知成员\n\t * @param options\n\t */connection.prototype.createGroup=function(options){this.groupOption=options;var roomId=+new Date();var toRoom=this._getGroupJid(roomId);var to=toRoom+'/'+this.context.userId;var pres=$pres({to:to}).c('x',{xmlns:'http://jabber.org/protocol/muc'}).up().c('create',{xmlns:'http://jabber.org/protocol/muc'}).up();// createGroupACK\nthis.sendCommand(pres.tree());};function _setText(valueDom,v){if('textContent'in valueDom){valueDom.textContent=v;}else if('text'in valueDom){valueDom.text=v;}else{// Strophe.info('_setText 4 ----------');\n// valueDom.innerHTML = v;\n}}var WebIM=window.WebIM||{};WebIM.connection=connection;WebIM.utils=_utils;WebIM.statusCode=_code;WebIM.message=_msg.message;WebIM.doQuery=function(str,suc,fail){if(typeof window.cefQuery==='undefined'){return;}window.cefQuery({request:str,persistent:false,onSuccess:suc,onFailure:fail});};module.exports=WebIM;if(false){module.hot.accept();}/***/},/* 2 *//***/function(module,exports){;(function(){exports.code={WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR:0,WEBIM_CONNCTION_OPEN_ERROR:1,WEBIM_CONNCTION_AUTH_ERROR:2,WEBIM_CONNCTION_OPEN_USERGRID_ERROR:3,WEBIM_CONNCTION_ATTACH_ERROR:4,WEBIM_CONNCTION_ATTACH_USERGRID_ERROR:5,WEBIM_CONNCTION_REOPEN_ERROR:6,WEBIM_CONNCTION_SERVER_CLOSE_ERROR:7,//7: client-side network offline (net::ERR_INTERNET_DISCONNECTED)\nWEBIM_CONNCTION_SERVER_ERROR:8,//8: offline by multi login\nWEBIM_CONNCTION_IQ_ERROR:9,WEBIM_CONNCTION_PING_ERROR:10,WEBIM_CONNCTION_NOTIFYVERSION_ERROR:11,WEBIM_CONNCTION_GETROSTER_ERROR:12,WEBIM_CONNCTION_CROSSDOMAIN_ERROR:13,WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES:14,WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR:15,WEBIM_CONNCTION_DISCONNECTED:16,//16: server-side close the websocket connection\nWEBIM_CONNCTION_AJAX_ERROR:17,WEBIM_CONNCTION_JOINROOM_ERROR:18,WEBIM_CONNCTION_GETROOM_ERROR:19,WEBIM_CONNCTION_GETROOMINFO_ERROR:20,WEBIM_CONNCTION_GETROOMMEMBER_ERROR:21,WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR:22,WEBIM_CONNCTION_LOAD_CHATROOM_ERROR:23,WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR:24,WEBIM_CONNCTION_JOINCHATROOM_ERROR:25,WEBIM_CONNCTION_QUITCHATROOM_ERROR:26,WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR:27,WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR:28,WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR:29,WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR:30,WEBIM_CONNCTION_CALLBACK_INNER_ERROR:31,//31: 处理下行消息出错 try/catch抛出异常\nWEBIM_CONNCTION_CLIENT_OFFLINE:32,//32: client offline\nWEBIM_CONNCTION_CLIENT_LOGOUT:33,//33: client logout\nWEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR:34,// 34: Over amount of the tabs a user opened in the same browser\nWEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP:35,WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP:36,WEBIM_CONNECTION_ACCEPT_JOIN_GROUP:37,WEBIM_CONNECTION_DECLINE_JOIN_GROUP:38,WEBIM_CONNECTION_CLOSED:39,WEBIM_UPLOADFILE_BROWSER_ERROR:100,WEBIM_UPLOADFILE_ERROR:101,WEBIM_UPLOADFILE_NO_LOGIN:102,WEBIM_UPLOADFILE_NO_FILE:103,WEBIM_DOWNLOADFILE_ERROR:200,WEBIM_DOWNLOADFILE_NO_LOGIN:201,WEBIM_DOWNLOADFILE_BROWSER_ERROR:202,WEBIM_MESSAGE_REC_TEXT:300,WEBIM_MESSAGE_REC_TEXT_ERROR:301,WEBIM_MESSAGE_REC_EMOTION:302,WEBIM_MESSAGE_REC_PHOTO:303,WEBIM_MESSAGE_REC_AUDIO:304,WEBIM_MESSAGE_REC_AUDIO_FILE:305,WEBIM_MESSAGE_REC_VEDIO:306,WEBIM_MESSAGE_REC_VEDIO_FILE:307,WEBIM_MESSAGE_REC_FILE:308,WEBIM_MESSAGE_SED_TEXT:309,WEBIM_MESSAGE_SED_EMOTION:310,WEBIM_MESSAGE_SED_PHOTO:311,WEBIM_MESSAGE_SED_AUDIO:312,WEBIM_MESSAGE_SED_AUDIO_FILE:313,WEBIM_MESSAGE_SED_VEDIO:314,WEBIM_MESSAGE_SED_VEDIO_FILE:315,WEBIM_MESSAGE_SED_FILE:316,WEBIM_MESSAGE_SED_ERROR:317,STATUS_INIT:400,STATUS_DOLOGIN_USERGRID:401,STATUS_DOLOGIN_IM:402,STATUS_OPENED:403,STATUS_CLOSING:404,STATUS_CLOSED:405,STATUS_ERROR:406};})();/***/},/* 3 *//***/function(module,exports,__webpack_require__){;(function(){var EMPTYFN=function EMPTYFN(){};var _code=__webpack_require__(2).code;var WEBIM_FILESIZE_LIMIT=10485760;var _createStandardXHR=function _createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){return false;}};var _createActiveXHR=function _createActiveXHR(){try{return new window.ActiveXObject('Microsoft.XMLHTTP');}catch(e){return false;}};var _xmlrequest=function _xmlrequest(crossDomain){crossDomain=crossDomain||true;var temp=_createStandardXHR()||_createActiveXHR();if('withCredentials'in temp){return temp;}if(!crossDomain){return temp;}if(typeof window.XDomainRequest==='undefined'){return temp;}var xhr=new XDomainRequest();xhr.readyState=0;xhr.status=100;xhr.onreadystatechange=EMPTYFN;xhr.onload=function(){xhr.readyState=4;xhr.status=200;var xmlDoc=new ActiveXObject('Microsoft.XMLDOM');xmlDoc.async='false';xmlDoc.loadXML(xhr.responseText);xhr.responseXML=xmlDoc;xhr.response=xhr.responseText;xhr.onreadystatechange();};xhr.ontimeout=xhr.onerror=function(){xhr.readyState=4;xhr.status=500;xhr.onreadystatechange();};return xhr;};var _hasFlash=function(){if('ActiveXObject'in window){try{return new ActiveXObject('ShockwaveFlash.ShockwaveFlash');}catch(ex){return 0;}}else{if(navigator.plugins&&navigator.plugins.length>0){return navigator.plugins['Shockwave Flash'];}}return 0;}();var _base64=function _base64(){var self=this;// private property\nvar _keyStr=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";// public method for encoding\nthis.encode=function(input){var output=\"\";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=self._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4);}return output;};// public method for decoding\nthis.decode=function(input){var output=\"\";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(i<input.length){enc1=_keyStr.indexOf(input.charAt(i++));enc2=_keyStr.indexOf(input.charAt(i++));enc3=_keyStr.indexOf(input.charAt(i++));enc4=_keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}if(enc4!=64){output=output+String.fromCharCode(chr3);}}output=self._utf8_decode(output);return output;};// private method for UTF-8 encoding\nthis._utf8_encode=function(string){string=string.replace(/\\r\\n/g,\"\\n\");var utftext=\"\";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128);}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128);}}return utftext;};// private method for UTF-8 decoding\nthis._utf8_decode=function(utftext){var string=\"\";var i=0;var c=0;var c1=0;var c2=0;var c3=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2;}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3;}}return string;};};var _tmpUtilXHR=_xmlrequest(),_hasFormData=typeof FormData!=='undefined',_hasBlob=typeof Blob!=='undefined',_isCanSetRequestHeader=_tmpUtilXHR.setRequestHeader||false,_hasOverrideMimeType=_tmpUtilXHR.overrideMimeType||false,_isCanUploadFileAsync=_isCanSetRequestHeader&&_hasFormData,_isCanUploadFile=_isCanUploadFileAsync||_hasFlash,_isCanDownLoadFile=_isCanSetRequestHeader&&(_hasBlob||_hasOverrideMimeType);if(!Object.keys){Object.keys=function(){'use strict';var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable('toString'),dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],dontEnumsLength=dontEnums.length;return function(obj){if((typeof obj==='undefined'?'undefined':_typeof(obj))!=='object'&&(typeof obj!=='function'||obj===null)){throw new TypeError('Object.keys called on non-object');}var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop);}}if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i]);}}}return result;};}();}var utils={hasFormData:_hasFormData,hasBlob:_hasBlob,emptyfn:EMPTYFN,isCanSetRequestHeader:_isCanSetRequestHeader,hasOverrideMimeType:_hasOverrideMimeType,isCanUploadFileAsync:_isCanUploadFileAsync,isCanUploadFile:_isCanUploadFile,isCanDownLoadFile:_isCanDownLoadFile,isSupportWss:function(){var notSupportList=[//1: QQ browser X5 core\n/MQQBrowser[\\/]5([.]\\d+)?\\sTBS///2: etc.\n//...\n];if(!window.WebSocket){return false;}var ua=window.navigator.userAgent;for(var i=0,l=notSupportList.length;i<l;i++){if(notSupportList[i].test(ua)){return false;}}return true;}(),getIEVersion:function(){var ua=navigator.userAgent,matches,tridentMap={'4':8,'5':9,'6':10,'7':11};matches=ua.match(/MSIE (\\d+)/i);if(matches&&matches[1]){return+matches[1];}matches=ua.match(/Trident\\/(\\d+)/i);if(matches&&matches[1]){return tridentMap[matches[1]]||null;}return null;}(),stringify:function stringify(json){if(typeof JSON!=='undefined'&&JSON.stringify){return JSON.stringify(json);}else{var s='',arr=[];var iterate=function iterate(json){var isArr=false;if(Object.prototype.toString.call(json)==='[object Array]'){arr.push(']','[');isArr=true;}else if(Object.prototype.toString.call(json)==='[object Object]'){arr.push('}','{');}for(var o in json){if(Object.prototype.toString.call(json[o])==='[object Null]'){json[o]='null';}else if(Object.prototype.toString.call(json[o])==='[object Undefined]'){json[o]='undefined';}if(json[o]&&_typeof(json[o])==='object'){s+=','+(isArr?'':'\"'+o+'\":'+(isArr?'\"':''))+iterate(json[o])+'';}else{s+=',\"'+(isArr?'':o+'\":\"')+json[o]+'\"';}}if(s!=''){s=s.slice(1);}return arr.pop()+s+arr.pop();};return iterate(json);}},login:function login(options){var options=options||{};var suc=options.success||EMPTYFN;var err=options.error||EMPTYFN;var appKey=options.appKey||'';var devInfos=appKey.split('#');if(devInfos.length!==2){err({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR});return false;}var orgName=devInfos[0];var appName=devInfos[1];var https=https||options.https;var user=options.user||'';var pwd=options.pwd||'';var apiUrl=options.apiUrl;var loginJson={grant_type:'password',username:user,password:pwd,timestamp:+new Date()};var loginfo=utils.stringify(loginJson);var options={url:apiUrl+'/'+orgName+'/'+appName+'/token',dataType:'json',data:loginfo,success:suc,error:err};return utils.ajax(options);},getFileUrl:function getFileUrl(fileInputId){var uri={url:'',filename:'',filetype:'',data:''};var fileObj=typeof fileInputId==='string'?document.getElementById(fileInputId):fileInputId;if(!utils.isCanUploadFileAsync||!fileObj){return uri;}try{if(window.URL.createObjectURL){var fileItems=fileObj.files;if(fileItems.length>0){var u=fileItems.item(0);uri.data=u;uri.url=window.URL.createObjectURL(u);uri.filename=u.name||'';}}else{// IE\nvar u=document.getElementById(fileInputId).value;uri.url=u;var pos1=u.lastIndexOf('/');var pos2=u.lastIndexOf('\\\\');var pos=Math.max(pos1,pos2);if(pos<0)uri.filename=u;else uri.filename=u.substring(pos+1);}var index=uri.filename.lastIndexOf('.');if(index!=-1){uri.filetype=uri.filename.substring(index+1).toLowerCase();}return uri;}catch(e){throw e;}},getFileSize:function getFileSize(file){var fileSize=0;if(file){if(file.files){if(file.files.length>0){fileSize=file.files[0].size;}}else if(file.select&&'ActiveXObject'in window){file.select();var fileobject=new ActiveXObject('Scripting.FileSystemObject');var file=fileobject.GetFile(file.value);fileSize=file.Size;}}console.log('fileSize: ',fileSize);if(fileSize>10000000){return false;}var kb=Math.round(fileSize/1000);if(kb<1000){fileSize=kb+' KB';}else if(kb>=1000){var mb=kb/1000;if(mb<1000){fileSize=mb.toFixed(1)+' MB';}else{var gb=mb/1000;fileSize=gb.toFixed(1)+' GB';}}return fileSize;},hasFlash:_hasFlash,trim:function trim(str){str=typeof str==='string'?str:'';return str.trim?str.trim():str.replace(/^\\s|\\s$/g,'');},parseEmoji:function parseEmoji(msg){if(typeof WebIM.Emoji==='undefined'||typeof WebIM.Emoji.map==='undefined'){return msg;}else{var emoji=WebIM.Emoji,reg=null;for(var face in emoji.map){if(emoji.map.hasOwnProperty(face)){while(msg.indexOf(face)>-1){msg=msg.replace(face,'<img class=\"emoji\" src=\"'+emoji.path+emoji.map[face]+'\" />');}}}return msg;}},parseLink:function parseLink(msg){var reg=/(https?\\:\\/\\/|www\\.)([a-zA-Z0-9-]+(\\.[a-zA-Z0-9]+)+)(\\:[0-9]{2,4})?\\/?((\\.[:_0-9a-zA-Z-]+)|[:_0-9a-zA-Z-]*\\/?)*\\??[:_#@*&%0-9a-zA-Z-/=]*/gm;msg=msg.replace(reg,function(v){var prefix=/^https?/gm.test(v);return\"<a href='\"+(prefix?v:'//'+v)+\"' target='_blank'>\"+v+\"</a>\";});return msg;},parseJSON:function parseJSON(data){if(window.JSON&&window.JSON.parse){return window.JSON.parse(data+'');}var requireNonComma,depth=null,str=utils.trim(data+'');return str&&!utils.trim(str.replace(/(,)|(\\[|{)|(}|])|\"(?:[^\"\\\\\\r\\n]|\\\\[\"\\\\\\/bfnrt]|\\\\u[\\da-fA-F]{4})*\"\\s*:?|true|false|null|-?(?!0\\d)\\d+(?:\\.\\d+|)(?:[eE][+-]?\\d+|)/g,function(token,comma,open,close){if(requireNonComma&&comma){depth=0;}if(depth===0){return token;}requireNonComma=open||comma;depth+=!close-!open;return'';}))?Function('return '+str)():Function('Invalid JSON: '+data)();},parseUploadResponse:function parseUploadResponse(response){return response.indexOf('callback')>-1?//lte ie9\nresponse.slice(9,-1):response;},parseDownloadResponse:function parseDownloadResponse(response){return response&&response.type&&response.type==='application/json'||0>Object.prototype.toString.call(response).indexOf('Blob')?this.url+'?token=':window.URL.createObjectURL(response);},uploadFile:function uploadFile(options){var options=options||{};options.onFileUploadProgress=options.onFileUploadProgress||EMPTYFN;options.onFileUploadComplete=options.onFileUploadComplete||EMPTYFN;options.onFileUploadError=options.onFileUploadError||EMPTYFN;options.onFileUploadCanceled=options.onFileUploadCanceled||EMPTYFN;var acc=options.accessToken||this.context.accessToken;if(!acc){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_NO_LOGIN,id:options.id});return;}var orgName,appName,devInfos;var appKey=options.appKey||this.context.appKey||'';if(appKey){devInfos=appKey.split('#');orgName=devInfos[0];appName=devInfos[1];}if(!orgName&&!appName){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,id:options.id});return;}var apiUrl=options.apiUrl;var uploadUrl=apiUrl+'/'+orgName+'/'+appName+'/chatfiles';if(!utils.isCanUploadFileAsync){if(utils.hasFlash&&typeof options.flashUpload==='function'){options.flashUpload&&options.flashUpload(uploadUrl,options);}else{options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_BROWSER_ERROR,id:options.id});}return;}var fileSize=options.file.data?options.file.data.size:undefined;if(fileSize>WEBIM_FILESIZE_LIMIT){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,id:options.id});return;}else if(fileSize<=0){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,id:options.id});return;}var xhr=utils.xmlrequest();var onError=function onError(e){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,id:options.id,xhr:xhr});};if(xhr.upload){xhr.upload.addEventListener('progress',options.onFileUploadProgress,false);}if(xhr.addEventListener){xhr.addEventListener('abort',options.onFileUploadCanceled,false);xhr.addEventListener('load',function(e){try{var json=utils.parseJSON(xhr.responseText);try{options.onFileUploadComplete(json);}catch(e){options.onFileUploadError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e});}}catch(e){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,data:xhr.responseText,id:options.id,xhr:xhr});}},false);xhr.addEventListener('error',onError,false);}else if(xhr.onreadystatechange){xhr.onreadystatechange=function(){if(xhr.readyState===4){if(ajax.status===200){try{var json=utils.parseJSON(xhr.responseText);options.onFileUploadComplete(json);}catch(e){options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,data:xhr.responseText,id:options.id,xhr:xhr});}}else{options.onFileUploadError({type:_code.WEBIM_UPLOADFILE_ERROR,data:xhr.responseText,id:options.id,xhr:xhr});}}else{xhr.abort();options.onFileUploadCanceled();}};}xhr.open('POST',uploadUrl);xhr.setRequestHeader('restrict-access','true');xhr.setRequestHeader('Accept','*/*');// Android QQ browser has some problem with this attribute.\nxhr.setRequestHeader('Authorization','Bearer '+acc);var formData=new FormData();formData.append('file',options.file.data);xhr.send(formData);},download:function download(options){options.onFileDownloadComplete=options.onFileDownloadComplete||EMPTYFN;options.onFileDownloadError=options.onFileDownloadError||EMPTYFN;var accessToken=options.accessToken||this.context.accessToken;if(!accessToken){options.onFileDownloadError({type:_code.WEBIM_DOWNLOADFILE_NO_LOGIN,id:options.id});return;}var onError=function onError(e){options.onFileDownloadError({type:_code.WEBIM_DOWNLOADFILE_ERROR,id:options.id,xhr:xhr});};if(!utils.isCanDownLoadFile){options.onFileDownloadComplete();return;}var xhr=utils.xmlrequest();if('addEventListener'in xhr){xhr.addEventListener('load',function(e){options.onFileDownloadComplete(xhr.response,xhr);},false);xhr.addEventListener('error',onError,false);}else if('onreadystatechange'in xhr){xhr.onreadystatechange=function(){if(xhr.readyState===4){if(ajax.status===200){options.onFileDownloadComplete(xhr.response,xhr);}else{options.onFileDownloadError({type:_code.WEBIM_DOWNLOADFILE_ERROR,id:options.id,xhr:xhr});}}else{xhr.abort();options.onFileDownloadError({type:_code.WEBIM_DOWNLOADFILE_ERROR,id:options.id,xhr:xhr});}};}var method=options.method||'GET';var resType=options.responseType||'blob';var mimeType=options.mimeType||'text/plain; charset=x-user-defined';xhr.open(method,options.url);if(typeof Blob!=='undefined'){xhr.responseType=resType;}else{xhr.overrideMimeType(mimeType);}var innerHeaer={'X-Requested-With':'XMLHttpRequest','Accept':'application/octet-stream','share-secret':options.secret,'Authorization':'Bearer '+accessToken};var headers=options.headers||{};for(var key in headers){innerHeaer[key]=headers[key];}for(var key in innerHeaer){if(innerHeaer[key]){xhr.setRequestHeader(key,innerHeaer[key]);}}xhr.send(null);},parseTextMessage:function parseTextMessage(message,faces){if(typeof message!=='string'){return;}if(Object.prototype.toString.call(faces)!=='[object Object]'){return{isemoji:false,body:[{type:'txt',data:message}]};}var receiveMsg=message;var emessage=[];var expr=/\\[[^[\\]]{2,3}\\]/mg;var emoji=receiveMsg.match(expr);if(!emoji||emoji.length<1){return{isemoji:false,body:[{type:'txt',data:message}]};}var isemoji=false;for(var i=0;i<emoji.length;i++){var tmsg=receiveMsg.substring(0,receiveMsg.indexOf(emoji[i])),existEmoji=WebIM.Emoji.map[emoji[i]];if(tmsg){emessage.push({type:'txt',data:tmsg});}if(!existEmoji){emessage.push({type:'txt',data:emoji[i]});continue;}var emojiStr=WebIM.Emoji.map?WebIM.Emoji.path+existEmoji:null;if(emojiStr){isemoji=true;emessage.push({type:'emoji',data:emojiStr});}else{emessage.push({type:'txt',data:emoji[i]});}var restMsgIndex=receiveMsg.indexOf(emoji[i])+emoji[i].length;receiveMsg=receiveMsg.substring(restMsgIndex);}if(receiveMsg){emessage.push({type:'txt',data:receiveMsg});}if(isemoji){return{isemoji:isemoji,body:emessage};}return{isemoji:false,body:[{type:'txt',data:message}]};},xmlrequest:_xmlrequest,getXmlFirstChild:function getXmlFirstChild(data,tagName){var children=data.getElementsByTagName(tagName);if(children.length==0){return null;}else{return children[0];}},ajax:function ajax(options){var dataType=options.dataType||'text';var suc=options.success||EMPTYFN;var error=options.error||EMPTYFN;var xhr=utils.xmlrequest();xhr.onreadystatechange=function(){if(xhr.readyState===4){var status=xhr.status||0;if(status===200){try{switch(dataType){case'text':suc(xhr.responseText);return;case'json':var json=utils.parseJSON(xhr.responseText);suc(json,xhr);return;case'xml':if(xhr.responseXML&&xhr.responseXML.documentElement){suc(xhr.responseXML.documentElement,xhr);}else{error({type:_code.WEBIM_CONNCTION_AJAX_ERROR,data:xhr.responseText});}return;}suc(xhr.response||xhr.responseText,xhr);}catch(e){error({type:_code.WEBIM_CONNCTION_AJAX_ERROR,data:e});}return;}else{error({type:_code.WEBIM_CONNCTION_AJAX_ERROR,data:xhr.responseText});return;}}if(xhr.readyState===0){error({type:_code.WEBIM_CONNCTION_AJAX_ERROR,data:xhr.responseText});}};if(options.responseType){if(xhr.responseType){xhr.responseType=options.responseType;}}if(options.mimeType){if(utils.hasOverrideMimeType){xhr.overrideMimeType(options.mimeType);}}var type=options.type||'POST',data=options.data||null,tempData='';if(type.toLowerCase()==='get'&&data){for(var o in data){if(data.hasOwnProperty(o)){tempData+=o+'='+data[o]+'&';}}tempData=tempData?tempData.slice(0,-1):tempData;options.url+=(options.url.indexOf('?')>0?'&':'?')+(tempData?tempData+'&':tempData)+'_v='+new Date().getTime();data=null;tempData=null;}xhr.open(type,options.url);if(utils.isCanSetRequestHeader){var headers=options.headers||{};for(var key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key]);}}}xhr.send(data);return xhr;},ts:function ts(){var d=new Date();var Hours=d.getHours();//获取当前小时数(0-23)\nvar Minutes=d.getMinutes();//获取当前分钟数(0-59)\nvar Seconds=d.getSeconds();//获取当前秒数(0-59)\nvar Milliseconds=d.getMilliseconds();//获取当前毫秒\nreturn(Hours<10?\"0\"+Hours:Hours)+':'+(Minutes<10?\"0\"+Minutes:Minutes)+':'+(Seconds<10?\"0\"+Seconds:Seconds)+':'+Milliseconds+' ';},getObjectKey:function getObjectKey(obj,val){for(var key in obj){if(obj[key]==val){return key;}}return'';},sprintf:function sprintf(){var arg=arguments,str=arg[0]||'',i,len;for(i=1,len=arg.length;i<len;i++){str=str.replace(/%s/,arg[i]);}return str;},encrypt:function encrypt(str){var base64=new _base64();var encrypt=base64.encode(str);return encrypt;},decrypt:function decrypt(str){var base64=new _base64();var decrypt=base64.decode(str);decrypt=escape(decrypt);decrypt=decrypt.replace(/%00/g,'');decrypt=unescape(decrypt);return decrypt;},setCookie:function setCookie(name,value,days){var cookie=name+'='+encodeURIComponent(value);if(typeof days=='number'){cookie+='; max-age: '+days*60*60*24;}document.cookie=cookie;},getCookie:function getCookie(){var allCookie={};var all=document.cookie;if(all===\"\"){return allCookie;}var list=all.split(\"; \");for(var i=0;i<list.length;i++){var cookie=list[i];var p=cookie.indexOf('=');var name=cookie.substring(0,p);var value=cookie.substring(p+1);value=decodeURIComponent(value);allCookie[name]=value;}return allCookie;}};exports.utils=utils;})();/***/},/* 4 *//***/function(module,exports,__webpack_require__){;(function(){'use strict';var _utils=__webpack_require__(3).utils;var Message=function Message(type,id){if(!this instanceof Message){return new Message(type);}this._msg={};if(typeof Message[type]==='function'){Message[type].prototype.setGroup=this.setGroup;this._msg=new Message[type](id);}return this._msg;};Message.prototype.setGroup=function(group){this.body.group=group;};/*\n\t     * text message\n\t     */Message.txt=function(id){this.id=id;this.type='txt';this.body={};};Message.txt.prototype.set=function(opt){this.value=opt.msg;this.body={id:this.id,to:opt.to,msg:this.value,type:this.type,roomType:opt.roomType,ext:opt.ext||{},success:opt.success,fail:opt.fail};!opt.roomType&&delete this.body.roomType;};/*\n\t     * cmd message\n\t     */Message.cmd=function(id){this.id=id;this.type='cmd';this.body={};};Message.cmd.prototype.set=function(opt){this.value='';this.body={to:opt.to,action:opt.action,msg:this.value,type:this.type,roomType:opt.roomType,ext:opt.ext||{},success:opt.success};!opt.roomType&&delete this.body.roomType;};/*\n\t     * loc message\n\t     */Message.location=function(id){this.id=id;this.type='loc';this.body={};};Message.location.prototype.set=function(opt){this.body={to:opt.to,type:this.type,roomType:opt.roomType,addr:opt.addr,lat:opt.lat,lng:opt.lng,ext:opt.ext||{}};};/*\n\t     * img message\n\t     */Message.img=function(id){this.id=id;this.type='img';this.body={};};Message.img.prototype.set=function(opt){opt.file=opt.file||_utils.getFileUrl(opt.fileInputId);this.value=opt.file;this.body={id:this.id,file:this.value,apiUrl:opt.apiUrl,to:opt.to,type:this.type,ext:opt.ext||{},roomType:opt.roomType,onFileUploadError:opt.onFileUploadError,onFileUploadComplete:opt.onFileUploadComplete,success:opt.success,fail:opt.fail,flashUpload:opt.flashUpload,width:opt.width,height:opt.height,body:opt.body,uploadError:opt.uploadError,uploadComplete:opt.uploadComplete};!opt.roomType&&delete this.body.roomType;};/*\n\t     * audio message\n\t     */Message.audio=function(id){this.id=id;this.type='audio';this.body={};};Message.audio.prototype.set=function(opt){opt.file=opt.file||_utils.getFileUrl(opt.fileInputId);this.value=opt.file;this.filename=opt.filename||this.value.filename;this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:opt.apiUrl,to:opt.to,type:this.type,ext:opt.ext||{},length:opt.length||0,roomType:opt.roomType,file_length:opt.file_length,onFileUploadError:opt.onFileUploadError,onFileUploadComplete:opt.onFileUploadComplete,success:opt.success,fail:opt.fail,flashUpload:opt.flashUpload,body:opt.body};!opt.roomType&&delete this.body.roomType;};/*\n\t     * file message\n\t     */Message.file=function(id){this.id=id;this.type='file';this.body={};};Message.file.prototype.set=function(opt){opt.file=opt.file||_utils.getFileUrl(opt.fileInputId);this.value=opt.file;this.filename=opt.filename||this.value.filename;this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:opt.apiUrl,to:opt.to,type:this.type,ext:opt.ext||{},roomType:opt.roomType,onFileUploadError:opt.onFileUploadError,onFileUploadComplete:opt.onFileUploadComplete,success:opt.success,fail:opt.fail,flashUpload:opt.flashUpload,body:opt.body};!opt.roomType&&delete this.body.roomType;};/*\n\t     * video message\n\t     */Message.video=function(id){};Message.video.prototype.set=function(opt){};var _Message=function _Message(message){if(!this instanceof _Message){return new _Message(message,conn);}this.msg=message;};_Message.prototype.send=function(conn){var me=this;var _send=function _send(message){message.ext=message.ext||{};message.ext.weichat=message.ext.weichat||{};message.ext.weichat.originType=message.ext.weichat.originType||'webim';var json={from:conn.context.userId||'',to:message.to,bodies:[message.body],ext:message.ext||{}};var jsonstr=_utils.stringify(json);var dom=$msg({type:message.group||'chat',to:message.toJid,id:message.id,xmlns:'jabber:client'}).c('body').t(jsonstr);if(message.roomType){dom.up().c('roomtype',{xmlns:'hyphenate:x:roomtype',type:'chatroom'});}setTimeout(function(){if(typeof _msgHash!=='undefined'&&_msgHash[message.id]){_msgHash[message.id].msg.fail instanceof Function&&_msgHash[message.id].msg.fail(message.id);}},60000);conn.sendCommand(dom.tree(),message.id);};if(me.msg.file){if(me.msg.body&&me.msg.body.url){// Only send msg\n_send(me.msg);return;}var _tmpComplete=me.msg.onFileUploadComplete;var _complete=function _complete(data){if(data.entities[0]['file-metadata']){var file_len=data.entities[0]['file-metadata']['content-length'];me.msg.file_length=file_len;me.msg.filetype=data.entities[0]['file-metadata']['content-type'];if(file_len>204800){me.msg.thumbnail=true;}}me.msg.body={type:me.msg.type||'file',url:(location.protocol!='https:'&&conn.isHttpDNS?conn.apiUrl+data.uri.substr(data.uri.indexOf(\"/\",9)):data.uri)+'/'+data.entities[0]['uuid'],secret:data.entities[0]['share-secret'],filename:me.msg.file.filename||me.msg.filename,size:{width:me.msg.width||0,height:me.msg.height||0},length:me.msg.length||0,file_length:me.msg.file_length||0,filetype:me.msg.filetype};_send(me.msg);_tmpComplete instanceof Function&&_tmpComplete(data,me.msg.id);};me.msg.onFileUploadComplete=_complete;_utils.uploadFile.call(conn,me.msg);}else{me.msg.body={type:me.msg.type==='chat'?'txt':me.msg.type,msg:me.msg.msg};if(me.msg.type==='cmd'){me.msg.body.action=me.msg.action;}else if(me.msg.type==='loc'){me.msg.body.addr=me.msg.addr;me.msg.body.lat=me.msg.lat;me.msg.body.lng=me.msg.lng;}_send(me.msg);}};exports._msg=_Message;exports.message=Message;})();/***/},/* 5 *//***/function(module,exports){;(function(){function Array_h(length){this.array=length===undefined?[]:new Array(length);}Array_h.prototype={/**\n\t         * 返回数组长度\n\t         *\n\t         * @return {Number} length [数组长度]\n\t         */length:function length(){return this.array.length;},at:function at(index){return this.array[index];},set:function set(index,obj){this.array[index]=obj;},/**\n\t         * 向数组的末尾添加一个或多个元素，并返回新的长度。\n\t         *\n\t         * @param  {*} obj [description]\n\t         * @return {Number} length [新数组的长度]\n\t         */push:function push(obj){return this.array.push(obj);},/**\n\t         * 返回数组中选定的元素\n\t         *\n\t         * @param  {Number} start [开始索引值]\n\t         * @param  {Number} end [结束索引值]\n\t         * @return {Array} newArray  [新的数组]\n\t         */slice:function slice(start,end){return this.array=this.array.slice(start,end);},concat:function concat(array){this.array=this.array.concat(array);},remove:function remove(index,count){count=count===undefined?1:count;this.array.splice(index,count);},join:function join(separator){return this.array.join(separator);},clear:function clear(){this.array.length=0;}};/**\n\t     * 先进先出队列 (First Input First Output)\n\t     *\n\t     * 一种先进先出的数据缓存器\n\t     */var Queue=function Queue(){this._array_h=new Array_h();};Queue.prototype={_index:0,/**\n\t         * 排队\n\t         *\n\t         * @param  {Object} obj [description]\n\t         * @return {[type]}     [description]\n\t         */push:function push(obj){this._array_h.push(obj);},/**\n\t         * 出队\n\t         *\n\t         * @return {Object} [description]\n\t         */pop:function pop(){var ret=null;if(this._array_h.length()){ret=this._array_h.at(this._index);if(++this._index*2>=this._array_h.length()){this._array_h.slice(this._index);this._index=0;}}return ret;},/**\n\t         * 返回队列中头部(即最新添加的)的动态对象\n\t         *\n\t         * @return {Object} [description]\n\t         */head:function head(){var ret=null,len=this._array_h.length();if(len){ret=this._array_h.at(len-1);}return ret;},/**\n\t         * 返回队列中尾部(即最早添加的)的动态对象\n\t         *\n\t         * @return {Object} [description]\n\t         */tail:function tail(){var ret=null,len=this._array_h.length();if(len){ret=this._array_h.at(this._index);}return ret;},/**\n\t         * 返回数据队列长度\n\t         *\n\t         * @return {Number} [description]\n\t         */length:function length(){return this._array_h.length()-this._index;},/**\n\t         * 队列是否为空\n\t         *\n\t         * @return {Boolean} [description]\n\t         */empty:function empty(){return this._array_h.length()===0;},clear:function clear(){this._array_h.clear();}};exports.Queue=Queue;})();/***/}/******/]));});;"]}